import{r as m,w as $t,n as Ma,o as ze,a as Xe,c as Bt,b as o,d as De,e as i,f as R,g as e,h as Y,i as q,j as re,T as dt,k as D,l as de,m as Pa,F as G,p as te,q as me,t as c,v as ct,u as Se,s as ss,x as Ra,y as Ct,z as St,A as Ea,B as Oe,C as Cs,D as Oa,E as Et,G as je,H as Ss,I as La,J as Ba,K as za,L as Fa}from"./vendor-7zQpsJS0.js";(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))b(v);new MutationObserver(v=>{for(const h of v)if(h.type==="childList")for(const u of h.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&b(u)}).observe(document,{childList:!0,subtree:!0});function d(v){const h={};return v.integrity&&(h.integrity=v.integrity),v.referrerPolicy&&(h.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?h.credentials="include":v.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function b(v){if(v.ep)return;v.ep=!0;const h=d(v);fetch(v.href,h)}})();const qe=(k,f)=>{const d=k.__vccOpts||k;for(const[b,v]of f)d[b]=v;return d},Ua={key:0,class:"search-modal-fixed"},Ga={class:"modal-top"},Ka={class:"modal-controls"},qa={class:"search-modal-inner"},Va={class:"search-container"},Ha={class:"input-wrapper"},Wa={class:"categories-container"},Ya={__name:"SearchModal",props:{isOpen:Boolean},emits:["close"],setup(k,{emit:f}){const d=k,b=f,v=m(null),h=m(null),u=H=>{h.value===H?h.value=null:h.value=H};$t(()=>d.isOpen,H=>{H?(document.body.style.overflow="hidden",Ma(()=>{var w;(w=v.value)==null||w.focus()})):(document.body.style.overflow="",h.value=null)});const T=H=>{H.key==="Escape"&&d.isOpen&&b("close")};return ze(()=>{window.addEventListener("keydown",T)}),Xe(()=>{window.removeEventListener("keydown",T),document.body.style.overflow=""}),(H,w)=>(o(),Bt(dt,{name:"fade"},{default:De(()=>[k.isOpen?(o(),i("div",Ua,[e("div",Ga,[w[6]||(w[6]=e("div",{class:"modal-logo"},"Komodo Cruises",-1)),e("div",Ka,[e("button",{class:"close-btn",onClick:w[0]||(w[0]=A=>H.$emit("close"))},[...w[5]||(w[5]=[e("span",{class:"btn-text"},"Close Search",-1),Y(),e("span",{class:"close-icon"},"✕",-1)])])])]),e("div",qa,[e("div",Va,[e("div",Ha,[e("input",{type:"text",placeholder:"Search...",class:"search-input",ref_key:"searchInput",ref:v},null,512),w[7]||(w[7]=e("button",{class:"search-submit"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1))])]),e("div",Wa,[w[11]||(w[11]=e("p",{class:"categories-label"},"Refine your search",-1)),e("div",{class:q(["categories-list",{"has-selection":h.value}])},[e("a",{href:"#",class:q(["category-link",{"is-selected":h.value==="Destinations"}]),onClick:w[1]||(w[1]=re(A=>u("Destinations"),["prevent"]))},"Destinations",2),w[8]||(w[8]=e("span",{class:"separator"},"•",-1)),e("a",{href:"#",class:q(["category-link",{"is-selected":h.value==="Ships"}]),onClick:w[2]||(w[2]=re(A=>u("Ships"),["prevent"]))},"Ships",2),w[9]||(w[9]=e("span",{class:"separator"},"•",-1)),e("a",{href:"#",class:q(["category-link",{"is-selected":h.value==="Cabins"}]),onClick:w[3]||(w[3]=re(A=>u("Cabins"),["prevent"]))},"Cabins",2),w[10]||(w[10]=e("span",{class:"separator"},"•",-1)),e("a",{href:"#",class:q(["category-link",{"is-selected":h.value==="Blog"}]),onClick:w[4]||(w[4]=re(A=>u("Blog"),["prevent"]))},"Blog",2)],2)])])])):R("",!0)]),_:1}))}},Ja=qe(Ya,[["__scopeId","data-v-69eb634e"]]),ja={key:0,class:"menu-modal-fixed"},Xa={class:"modal-top"},Za={class:"modal-controls"},Qa={__name:"MenuModal",props:{isOpen:Boolean},emits:["close","open-search"],setup(k,{emit:f}){const d=k,b=f;$t(()=>d.isOpen,h=>{h?document.body.style.overflow="hidden":document.body.style.overflow=""});const v=h=>{h.key==="Escape"&&d.isOpen&&b("close")};return ze(()=>{window.addEventListener("keydown",v)}),Xe(()=>{window.removeEventListener("keydown",v),document.body.style.overflow=""}),(h,u)=>(o(),Bt(dt,{name:"fade"},{default:De(()=>[k.isOpen?(o(),i("div",ja,[e("div",Xa,[u[4]||(u[4]=e("div",{class:"modal-logo"},"Komodo Cruises",-1)),e("div",Za,[e("button",{class:"control-btn",onClick:u[0]||(u[0]=T=>h.$emit("open-search"))},[...u[2]||(u[2]=[e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"icon"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1),e("span",{class:"btn-text"},"Search",-1)])]),e("button",{class:"control-btn",onClick:u[1]||(u[1]=T=>h.$emit("close"))},[...u[3]||(u[3]=[e("span",{class:"btn-text"},"Close",-1),Y(),e("span",{class:"close-icon"},"✕",-1)])])])]),u[5]||(u[5]=e("div",{class:"menu-content-container"},[e("div",{class:"col-left"},[e("nav",{class:"main-nav"},[e("a",{href:"#",class:"main-link"},"Our Collection"),e("a",{href:"#",class:"main-link"},"Villa Collection"),e("a",{href:"#",class:"main-link"},"Conservation"),e("a",{href:"#",class:"main-link"},"Wildlife"),e("a",{href:"#",class:"main-link"},"About Komodo")]),e("div",{class:"social-icons"},[e("a",{href:"#",class:"social-link"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),e("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),e("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})])]),e("a",{href:"#",class:"social-link"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})])]),e("a",{href:"#",class:"social-link"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"})])]),e("a",{href:"#",class:"social-link"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}),e("rect",{x:"2",y:"9",width:"4",height:"12"}),e("circle",{cx:"4",cy:"4",r:"2"})])]),e("a",{href:"#",class:"social-link"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),e("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})])])])]),e("div",{class:"col-right"},[e("div",{class:"secondary-nav-grid"},[e("div",{class:"sec-col"},[e("a",{href:"#",class:"sec-link"},"Photos & Videos"),e("a",{href:"#",class:"sec-link"},"Blog"),e("a",{href:"#",class:"sec-link"},"Indonesia Is..."),e("a",{href:"#",class:"sec-link"},"Magazine"),e("a",{href:"#",class:"sec-link"},"Rates"),e("a",{href:"#",class:"sec-link"},"Exclusive Offers"),e("a",{href:"#",class:"sec-link"},"Press Room"),e("a",{href:"#",class:"sec-link"},"Careers")]),e("div",{class:"sec-col"},[e("a",{href:"#",class:"sec-link icon-link"},[e("svg",{class:"nav-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]),Y(" Resource Library ")]),e("a",{href:"#",class:"sec-link icon-link"},[e("svg",{class:"nav-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),e("polyline",{points:"10 17 15 12 10 7"}),e("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]),Y(" Trade Login & Rates ")]),e("a",{href:"#",class:"sec-link icon-link"},[e("svg",{class:"nav-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M20 7h-9"}),e("path",{d:"M14 17H5"}),e("circle",{cx:"17",cy:"17",r:"3"}),e("circle",{cx:"7",cy:"7",r:"3"})]),Y(" Suppliers ")])])]),e("div",{class:"contact-info"},[e("p",{class:"contact-email"},"E. enquiries@komodocruises.com"),e("p",{class:"contact-phone"},"T. +62 (0) 21 683 3424"),e("a",{href:"#",class:"view-contact"},"View all contact information ›")])])],-1))])):R("",!0)]),_:1}))}},en=qe(Qa,[["__scopeId","data-v-d4e9a465"]]),tn="https://script.google.com/macros/s/AKfycbwvfIHPdbGq7cVlbX6g1IPoBdE2xIqYD9fZJclMlq9AYAFGa--e3eGV15HbYfrj2z4vLw/exec";function as(k){const f=new URL(tn),d=new URLSearchParams;for(const[b,v]of Object.entries(k))v!==void 0&&d.set(b,v);return f.search=d.toString(),f.toString()}async function ns(k){if(!k.ok)throw new Error(`HTTP ${k.status}: ${k.statusText}`);const f=await k.json();if((f==null?void 0:f.ok)===!1)throw new Error(f.error||"API error");return f}const Zt=new Map,Qt=new Map,kt=new Map;let es=null;async function xs(){if(es)return es;const k=as({resource:"operators"}),f=await fetch(k),d=await ns(f);return es=d,d}async function Ds(k){const f=`cabins|${k||""}`;if(Zt.has(f))return Zt.get(f);const d=as({resource:"cabins",sheet:k}),b=await fetch(d),v=await ns(b);return Zt.set(f,v),v}async function Ot(k,f){if(!/^\d{4}-\d{2}-\d{2}$/.test(k))throw new Error("Date must be in YYYY-MM-DD format");const d=`${k}|${f||""}`;if(Qt.has(d))return Qt.get(d);if(kt.has(d))return kt.get(d);const b=as({resource:"availability",date:k,sheet:f}),v=fetch(b).then(h=>ns(h)).then(h=>(Qt.set(d,h),kt.delete(d),h)).catch(h=>{throw kt.delete(d),h});return kt.set(d,v),v}function Ts(k){const f=k.getFullYear(),d=String(k.getMonth()+1).padStart(2,"0"),b=String(k.getDate()).padStart(2,"0");return`${f}-${d}-${b}`}function Lt(k){return new Date(k+"T00:00:00")}function sn(){return Ts(new Date)}const Ns=""+new URL("left-arrow-CTppQl_n.svg",import.meta.url).href,Is=""+new URL("right-arrow-BeSe4_f_.svg",import.meta.url).href,an={key:0,class:"modal-overlay"},nn={class:"modal-container"},on={class:"modal-body"},ln={class:"plan-wrap plan-page"},rn={class:"plan-content"},un={class:"wizard-progress"},cn={class:"wizard-circle"},dn={key:0,class:"wizard-check",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},vn={key:1},pn={class:"wizard-circle"},mn={key:0,class:"wizard-check",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},fn={key:1},gn={class:"wizard-circle"},hn={key:0,class:"wizard-check",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},yn={key:1},bn={class:"wizard-circle"},kn={key:0,class:"wizard-check",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},wn={key:1},_n={class:"wizard-circle"},$n={key:0,class:"wizard-check",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Cn={key:1},Sn={key:0},Dn={class:"list"},xn={class:"list-text"},Tn=["value","aria-label"],Nn={key:1},In={class:"list"},An={key:0,class:"muted"},Mn={class:"list-text"},Pn=["value","aria-label"],Rn={key:0,class:"muted"},En={key:2},On={class:"date-range-display"},Ln={class:"date-value"},Bn={class:"date-value"},zn={class:"custom-calendar"},Fn={class:"calendar-header"},Un={class:"calendar-title"},Gn={class:"calendar-grid"},Kn={class:"calendar-days"},qn=["disabled","onClick"],Vn={key:3},Hn={class:"counters"},Wn={class:"counter-row"},Yn={class:"counter-ctrls"},Jn={class:"count"},jn={class:"counter-row"},Xn={class:"counter-ctrls"},Zn={class:"count"},Qn={class:"counter-row"},eo={class:"counter-ctrls"},to={class:"count"},so={class:"counter-row"},ao={class:"counter-ctrls"},no={class:"count"},oo={key:4},io={class:"bottom-bar"},lo={class:"nav-inner-footer"},ro=["src"],uo=["src"],co={key:0,class:"toast-notification"},vo={class:"toast-message"},po="Nusa Tenggara Timur",mo={__name:"PlanModal",props:{isOpen:Boolean},emits:["close","navigate-to-results"],setup(k,{emit:f}){const d=k,b=f,v=m(1),h=["Komodo National Park","Labuan Bajo"],u=[],T=m([]),H=m(!1),w=m([]),A=m([]),B=m(""),M=m(""),J=m(2),P=m(0),ue=m(0),j=m(0),E=m(!1),$=m("");let z=null;const ae=m(new Date().getMonth()),ne=m(new Date().getFullYear()),xe=["Destinations","Ships","Dates","Guests","Submit"],oe=D(()=>xe[v.value-2]||""),x=D(()=>v.value<5?xe[v.value-1]:"Submit");D(()=>sn());const Re=D(()=>`${["January","February","March","April","May","June","July","August","September","October","November","December"][ae.value]} ${ne.value}`),Ie=D(()=>{const S=new Date(ne.value,ae.value,1),l=new Date(ne.value,ae.value+1,0),_=new Date(S),Q=new Date;_.setDate(_.getDate()-_.getDay());const he=[],le=new Date(l);le.setDate(le.getDate()+(6-l.getDay()));for(let se=new Date(_);se<=le;se.setDate(se.getDate()+1)){se.getDay();const ke=se.getMonth()===ae.value,fe=new Date(se);fe.setHours(0,0,0,0);const ot=new Date(Q);ot.setHours(0,0,0,0);const it=fe<ot,vt=ke&&!it,Qe=Ts(se);let pt=!1,mt=!1,ft=!1;if(B.value&&M.value&&ke){const gt=Lt(B.value),Dt=Lt(M.value);fe>=gt&&fe<=Dt&&(pt=!0,fe.getTime()===gt.getTime()&&(mt=!0),fe.getTime()===Dt.getTime()&&(ft=!0))}he.push({key:se.getTime(),date:se.getDate(),fullDate:Qe,isCurrentMonth:ke,isSelectable:vt,isPast:it,isSelected:B.value===Qe||M.value===Qe,isInRange:pt,isRangeStart:mt,isRangeEnd:ft})}return he}),Ae=D(()=>w.value.length>0),K=D(()=>w.value.length>0&&A.value.length>0),Ve=D(()=>w.value.length>0&&A.value.length>0&&!!B.value);$t(w,()=>{A.value=[]});const ve={bodyOverflow:"",htmlOverflow:"",bodyPadding:"",htmlPadding:""};$t(()=>d.isOpen,S=>{S?Ze():$e()},{immediate:!0}),ze(()=>{Me()}),Xe(()=>{$e()});function He(){b("close")}function V(S){v.value=S}function y(){if(v.value===1&&w.value.length===0)return Ee("Please select at least one destination first.");if(v.value===2&&A.value.length===0)return Ee("Please select at least one ship first.");if(v.value===3&&!B.value)return Ee("Please select a start date first.");v.value<5?v.value++:Fe()}function we(){v.value>1&&v.value--}function N(){Fe()}function _e(){Fe()}function Fe(){const S=T.value.filter(he=>A.value.includes(he.id)),l=S.map(he=>he.label),_=S.map(he=>he.sheet),Q={region:po,destination:w.value[0]||"",destinations:w.value.slice(),ships:l,shipSheets:_,ship:l[0]||"",lodges:l.slice(),dateFrom:B.value,dateTo:M.value,adults:J.value,children:P.value,age3_9:ue.value,age0_2:j.value,totalGuests:J.value+P.value+ue.value+j.value,timestamp:Date.now()};localStorage.setItem("komodo_search_criteria",JSON.stringify(Q)),b("navigate-to-results")}async function Me(){H.value=!0;try{const l=((await xs()).operators||[]).map(_=>{var le,se;const Q=((le=_.operator)==null?void 0:le.trim())||"",he=((se=_.sourceSheet)==null?void 0:se.trim())||Q;return{id:`${Q}__${he}`,label:Q,sheet:he}}).filter(_=>_.label&&_.sheet);T.value=l.length?l:Ge(u)}catch(S){console.warn("Failed to load operators:",S),T.value=Ge(u)}finally{H.value=!1}}function Ze(){const S=document.body,l=document.documentElement;if(!S||!l)return;const _=window.innerWidth-l.clientWidth;if(ve.bodyOverflow=S.style.overflow,ve.htmlOverflow=l.style.overflow,ve.bodyPadding=S.style.paddingRight,ve.htmlPadding=l.style.paddingRight,_>0){const Q=`${_}px`;S.style.paddingRight=Q,l.style.paddingRight=Q}S.style.overflow="hidden",l.style.overflow="hidden"}function $e(){const S=document.body,l=document.documentElement;!S||!l||(S.style.overflow=ve.bodyOverflow,l.style.overflow=ve.htmlOverflow,S.style.paddingRight=ve.bodyPadding,l.style.paddingRight=ve.htmlPadding)}function Ge(S){return Array.isArray(S)?S.map(l=>{var he,le;const _=((he=l.label)==null?void 0:he.trim())||"",Q=((le=l.sheet)==null?void 0:le.trim())||_;return{id:l.id||`${_}__${Q}`,label:_,sheet:Q}}).filter(l=>l.label&&l.sheet):[]}function ge(S){S==="adults"?J.value++:S==="children"?P.value++:S==="age3_9"?ue.value++:S==="age0_2"&&j.value++}function Ce(S){S==="adults"&&J.value>0?J.value--:S==="children"&&P.value>0?P.value--:S==="age3_9"&&ue.value>0?ue.value--:S==="age0_2"&&j.value>0&&j.value--}function Ee(S){$.value=S,E.value=!0,z&&clearTimeout(z),z=setTimeout(()=>{E.value=!1},3e3)}function ie(){ae.value===0?(ae.value=11,ne.value--):ae.value--}function Te(){ae.value===11?(ae.value=0,ne.value++):ae.value++}function We(S){if(S.isSelectable)if(!B.value||B.value&&M.value)B.value=S.fullDate,M.value="";else{const l=Lt(B.value);Lt(S.fullDate)<l?(M.value=B.value,B.value=S.fullDate):M.value=S.fullDate}}return(S,l)=>(o(),Bt(Pa,{to:"body"},[de(dt,{name:"modal-fade"},{default:De(()=>[k.isOpen?(o(),i("div",an,[e("div",nn,[e("div",{class:"modal-header"},[e("div",{class:"modal-header-content"},[l[15]||(l[15]=e("h2",{class:"modal-title"},"Plan your trip",-1)),e("button",{class:"modal-close",onClick:He},"Close ✕")])]),e("div",on,[e("section",ln,[e("div",rn,[e("div",un,[e("div",{class:q(["wizard-step",{completed:v.value>1,active:v.value===1}]),onClick:l[0]||(l[0]=_=>V(1))},[e("div",cn,[v.value>1?(o(),i("svg",dn,[...l[16]||(l[16]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(o(),i("span",vn,"1"))]),l[17]||(l[17]=e("span",{class:"wizard-label"},"Destinations",-1))],2),e("div",{class:q(["wizard-line",{completed:v.value>1}])},null,2),e("div",{class:q(["wizard-step",{completed:v.value>2,active:v.value===2,disabled:!Ae.value}]),onClick:l[1]||(l[1]=_=>Ae.value&&V(2))},[e("div",pn,[v.value>2?(o(),i("svg",mn,[...l[18]||(l[18]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(o(),i("span",fn,"2"))]),l[19]||(l[19]=e("span",{class:"wizard-label"},"Ships",-1))],2),e("div",{class:q(["wizard-line",{completed:v.value>2}])},null,2),e("div",{class:q(["wizard-step",{completed:v.value>3,active:v.value===3,disabled:!K.value}]),onClick:l[2]||(l[2]=_=>K.value&&V(3))},[e("div",gn,[v.value>3?(o(),i("svg",hn,[...l[20]||(l[20]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(o(),i("span",yn,"3"))]),l[21]||(l[21]=e("span",{class:"wizard-label"},"Dates",-1))],2),e("div",{class:q(["wizard-line",{completed:v.value>3}])},null,2),e("div",{class:q(["wizard-step",{completed:v.value>4,active:v.value===4,disabled:!Ve.value}]),onClick:l[3]||(l[3]=_=>Ve.value&&V(4))},[e("div",bn,[v.value>4?(o(),i("svg",kn,[...l[22]||(l[22]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(o(),i("span",wn,"4"))]),l[23]||(l[23]=e("span",{class:"wizard-label"},"Guests",-1))],2),e("div",{class:q(["wizard-line",{completed:v.value>4}])},null,2),e("div",{class:q(["wizard-step",{completed:v.value===5,active:v.value===5,disabled:!Ve.value}]),onClick:l[4]||(l[4]=_=>Ve.value&&V(5))},[e("div",_n,[v.value===5?(o(),i("svg",$n,[...l[24]||(l[24]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(o(),i("span",Cn,"5"))]),l[25]||(l[25]=e("span",{class:"wizard-label"},"Submit",-1))],2)]),v.value===1?(o(),i("div",Sn,[l[27]||(l[27]=e("h3",{class:"step-title"},"Destinations",-1)),l[28]||(l[28]=e("p",{class:"results-note"}," Select the destinations you're interested in: ",-1)),e("div",Dn,[l[26]||(l[26]=e("div",{class:"list-heading"},"Nusa Tenggara Timur",-1)),(o(),i(G,null,te(h,_=>e("div",{class:"list-row",key:_},[e("div",xn,c(_),1),me(e("input",{class:"check",type:"checkbox",value:_,"onUpdate:modelValue":l[5]||(l[5]=Q=>w.value=Q),"aria-label":`Destination ${_}`},null,8,Tn),[[ct,w.value]])])),64))])])):v.value===2?(o(),i("div",Nn,[l[30]||(l[30]=e("h3",{class:"step-title"},"Ships",-1)),l[31]||(l[31]=e("p",{class:"results-note"},"Please select one or more ships:",-1)),e("div",In,[l[29]||(l[29]=e("div",{class:"list-heading"},"Available Ships",-1)),H.value?(o(),i("div",An," Loading ships... ")):(o(),i(G,{key:1},[(o(!0),i(G,null,te(T.value,_=>(o(),i("div",{class:"list-row",key:_.id},[e("div",Mn,c(_.label),1),me(e("input",{class:"check",type:"checkbox",value:_.id,"onUpdate:modelValue":l[6]||(l[6]=Q=>A.value=Q),"aria-label":`Ship ${_.label}`},null,8,Pn),[[ct,A.value]])]))),128)),T.value.length===0?(o(),i("div",Rn," No ships found from API. ")):R("",!0)],64))])])):v.value===3?(o(),i("div",En,[l[34]||(l[34]=e("h3",{class:"step-title"},"Dates",-1)),l[35]||(l[35]=e("p",{class:"results-note"},"Select your travel dates:",-1)),l[36]||(l[36]=e("p",{class:"results-note text-sm"}," Click to select start date, then click again to select end date. ",-1)),e("div",On,[e("span",Ln,c(B.value||"Start date"),1),l[32]||(l[32]=e("span",{class:"date-arrow"},"→",-1)),e("span",Bn,c(M.value||"End date"),1)]),e("div",zn,[e("div",Fn,[e("h4",Un,c(Re.value),1),e("div",{class:"calendar-nav-group"},[e("button",{class:"calendar-nav",onClick:ie,type:"button"}," ‹ "),e("button",{class:"calendar-nav",onClick:Te,type:"button"}," › ")])]),e("div",Gn,[l[33]||(l[33]=e("div",{class:"calendar-weekdays"},[e("div",{class:"weekday"},"Su"),e("div",{class:"weekday"},"Mo"),e("div",{class:"weekday"},"Tu"),e("div",{class:"weekday"},"We"),e("div",{class:"weekday"},"Th"),e("div",{class:"weekday"},"Fr"),e("div",{class:"weekday"},"Sa")],-1)),e("div",Kn,[(o(!0),i(G,null,te(Ie.value,_=>(o(),i("button",{key:_.key,class:q(["calendar-day",{"other-month":!_.isCurrentMonth,selected:_.isSelected,disabled:!_.isSelectable,past:_.isPast,"in-range":_.isInRange,"range-start":_.isRangeStart,"range-end":_.isRangeEnd}]),disabled:!_.isSelectable,onClick:Q=>We(_),type:"button"},c(_.date),11,qn))),128))])])])])):v.value===4?(o(),i("div",Vn,[l[41]||(l[41]=e("h3",{class:"step-title"},"Guests",-1)),l[42]||(l[42]=e("p",{class:"results-note"}," Please indicate how many adults will need to be accommodated. ",-1)),l[43]||(l[43]=e("p",{class:"results-note"}," If your booking includes children, please enquire directly on the next step. ",-1)),l[44]||(l[44]=e("p",{class:"results-note"}," View our child policy for each lodge here. ",-1)),e("div",Hn,[e("div",Wn,[l[37]||(l[37]=e("div",{class:"counter-text"},[e("div",{class:"semibold"},"Adults"),e("div",{class:"muted text-sm"},"Ages 17+")],-1)),e("div",Yn,[e("button",{type:"button",class:"btn-icon",onClick:l[7]||(l[7]=_=>Ce("adults"))}," − "),e("span",Jn,c(J.value),1),e("button",{type:"button",class:"btn-icon",onClick:l[8]||(l[8]=_=>ge("adults"))}," + ")])]),e("div",jn,[l[38]||(l[38]=e("div",{class:"counter-text"},[e("div",{class:"semibold"},"Children"),e("div",{class:"muted text-sm"},"Ages 10 - 16")],-1)),e("div",Xn,[e("button",{type:"button",class:"btn-icon",onClick:l[9]||(l[9]=_=>Ce("children"))}," − "),e("span",Zn,c(P.value),1),e("button",{type:"button",class:"btn-icon",onClick:l[10]||(l[10]=_=>ge("children"))}," + ")])]),e("div",Qn,[l[39]||(l[39]=e("div",{class:"counter-text"},[e("div",{class:"semibold"},"Ages 3 - 9")],-1)),e("div",eo,[e("button",{type:"button",class:"btn-icon",onClick:l[11]||(l[11]=_=>Ce("age3_9"))}," − "),e("span",to,c(ue.value),1),e("button",{type:"button",class:"btn-icon",onClick:l[12]||(l[12]=_=>ge("age3_9"))}," + ")])]),e("div",so,[l[40]||(l[40]=e("div",{class:"counter-text"},[e("div",{class:"semibold"},"Ages 0 - 2")],-1)),e("div",ao,[e("button",{type:"button",class:"btn-icon",onClick:l[13]||(l[13]=_=>Ce("age0_2"))}," − "),e("span",no,c(j.value),1),e("button",{type:"button",class:"btn-icon",onClick:l[14]||(l[14]=_=>ge("age0_2"))}," + ")])])])])):(o(),i("div",oo,[l[45]||(l[45]=e("h3",{class:"step-title"},"Check Availability",-1)),l[46]||(l[46]=e("p",{class:"results-note"}," To see if we have availability for your preferred criteria, please click the button below. ",-1)),e("div",{class:"mt-4"},[e("button",{class:"btn-primary",onClick:N}," Check now ")]),l[47]||(l[47]=e("div",{class:"section-divider",style:{margin:"1.5rem 0"}},null,-1)),l[48]||(l[48]=e("h4",{class:"section-title"}," Speak with a Komodo Cruises Travel Advisor ",-1)),l[49]||(l[49]=e("p",{class:"results-note"}," Need some help to plan your trip? Enquire below to contact one of our Komodo Cruises Travel Advisors. ",-1)),e("div",{class:"mt-4"},[e("button",{class:"btn-primary",onClick:_e}," Enquire now ")])])),e("div",io,[e("div",lo,[v.value>1?(o(),i("button",{key:0,class:"link-muted text-icon-btn",onClick:we},[e("img",{src:Se(Ns),alt:"Previous",class:"nav-arrow"},null,8,ro),Y(" "+c(oe.value),1)])):R("",!0),e("button",{class:"btn-primary text-icon-btn",onClick:y},[Y(c(x.value)+" ",1),e("img",{src:Se(Is),alt:"Next",class:"nav-arrow white-filter"},null,8,uo)])])])])])])])])):R("",!0)]),_:1}),de(dt,{name:"toast-slide"},{default:De(()=>[E.value?(o(),i("div",co,[l[50]||(l[50]=e("span",{class:"toast-icon"},"⚠️",-1)),e("span",vo,c($.value),1)])):R("",!0)]),_:1})]))}},os=qe(mo,[["__scopeId","data-v-f4851340"]]),fo={key:0,class:"nav-inner plan-mode"},go={key:1,class:"nav-inner"},ho={class:"nav-left"},yo={class:"nav-lang"},bo={width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",stroke:"currentColor","stroke-width":"1.2",style:{"margin-right":"6px"}},ko={key:0,class:"lang-dropdown"},wo=["onClick"],_o={class:"nav-center"},$o={class:"nav-right"},Co={width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",style:{"margin-left":"8px"}},So={key:0,class:"site-footer mt-16"},Do={class:"footer-inner container text-sm"},xo={__name:"App",setup(k){const f=ss(),d=Ra(),b=m(!1),v=m(!1),h=m(!1),u=m(!1),T=m(!1),H=m("EN"),w=m(!1),A=[{code:"EN",label:"English"},{code:"ID",label:"Indonesia"},{code:"ZH",label:"Chinese"},{code:"ES",label:"Spanish"},{code:"FR",label:"French"}],B=()=>{w.value=!w.value},M=E=>{H.value=E.code,w.value=!1},J=()=>{b.value=window.scrollY>window.innerHeight*.8;const E=document.querySelectorAll('[data-nav-theme="light"]');let $=!1;E.forEach(z=>{const ae=z.getBoundingClientRect();ae.top<=80&&ae.bottom>=80&&($=!0)}),T.value=$},P=()=>{h.value=!1,setTimeout(()=>{v.value=!0},300)},ue=()=>{d.path==="/results"?f.push("/find-reservation"):u.value=!0},j=()=>{u.value=!1,f.push("/results")};return ze(()=>{window.addEventListener("scroll",J)}),Xe(()=>{window.removeEventListener("scroll",J)}),(E,$)=>{const z=Ct("router-link"),ae=Ct("router-view");return o(),i("div",null,[de(Ja,{isOpen:v.value,onClose:$[0]||($[0]=ne=>v.value=!1)},null,8,["isOpen"]),de(os,{isOpen:u.value,onClose:$[1]||($[1]=ne=>u.value=!1),onNavigateToResults:j},null,8,["isOpen"]),de(en,{isOpen:h.value,onClose:$[2]||($[2]=ne=>h.value=!1),onOpenSearch:P},null,8,["isOpen"]),e("header",{class:q(["nav-container",{"nav-overlay":E.$route.path==="/","home-nav":E.$route.path==="/",scrolled:b.value,"nav-light-theme":T.value,"navbar-result":E.$route.path==="/results"||E.$route.path==="/find-reservation"}])},[E.$route.meta.planHeader?(o(),i("nav",fo,[$[6]||($[6]=e("div",{style:{display:"flex","align-items":"center",gap:"0.75rem",color:"var(--ocean-900)"}},[e("div",{class:"brand"},"Plan your trip")],-1)),de(z,{class:"link-close close-btn-style",to:"/"},{default:De(()=>[...$[5]||($[5]=[e("span",{class:"btn-text"},"Close",-1),e("span",{class:"close-icon"},"âœ•",-1)])]),_:1})])):(o(),i("nav",go,[e("div",ho,[e("span",{class:"nav-menu",onClick:$[3]||($[3]=ne=>h.value=!0),title:"Menu"},[...$[7]||($[7]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.2"},[e("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),e("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)])]),e("div",{class:"nav-lang-wrapper",onClick:B,title:"Select Language"},[e("span",yo,[(o(),i("svg",bo,[...$[8]||($[8]=[e("path",{d:"M1 1L5 5L9 1"},null,-1)])])),Y(" "+c(H.value),1)]),w.value?(o(),i("div",ko,[(o(),i(G,null,te(A,ne=>e("div",{key:ne.code,class:"lang-option",onClick:re(xe=>M(ne),["stop"])},c(ne.label),9,wo)),64))])):R("",!0)])]),e("div",_o,[de(z,{to:"/",class:"brand-link"},{default:De(()=>[...$[9]||($[9]=[e("span",{class:"brand-chip"},"KOMODO CRUISES",-1)])]),_:1})]),e("div",$o,[e("button",{class:"nav-text-item nav-plan-item",onClick:ue},[E.$route.path==="/results"?(o(),i(G,{key:0},[Y(" FIND RESERVATION ")],64)):(o(),i(G,{key:1},[$[10]||($[10]=Y(" PLAN ",-1)),$[11]||($[11]=e("span",{class:"desktop-only"},"YOUR",-1)),$[12]||($[12]=Y(" TRIP ",-1))],64))]),$[16]||($[16]=e("span",{class:"nav-text-item"},"LOGIN",-1)),e("span",{class:"nav-search",onClick:$[4]||($[4]=ne=>v.value=!0),title:"Search"},[...$[13]||($[13]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)])]),E.$route.path!=="/"&&E.$route.path!=="/results"&&E.$route.path!=="/find-reservation"?(o(),Bt(z,{key:0,to:"/plan",class:"btn-book-pill"},{default:De(()=>[$[15]||($[15]=Y(" BOOK NOW ",-1)),(o(),i("svg",Co,[...$[14]||($[14]=[e("path",{d:"M2 20h20M12 4v12m0 0l-4-4m4 4l4-4"},null,-1)])]))]),_:1})):R("",!0)])]))],2),de(ae),!E.$route.meta.planHeader&&E.$route.path!=="/"?(o(),i("footer",So,[e("div",Do," Â© "+c(new Date().getFullYear())+" Komodo Cruises ",1)])):R("",!0)])}}},To=""+new URL("Komodo-siX32_CS.mp4",import.meta.url).href,No=""+new URL("dest-komodo-BZfQdiBM.png",import.meta.url).href,Io=""+new URL("dest-labuan-bajo-H07b2mBM.png",import.meta.url).href,Ao=""+new URL("dest-togean-DN15mR21.png",import.meta.url).href,Mo={class:"destination-carousel"},Po={class:"carousel-container"},Ro={class:"carousel-viewport"},Eo=["src","alt"],Oo={class:"carousel-content"},Lo={class:"carousel-content-left"},Bo={class:"carousel-location"},zo={class:"carousel-title"},Fo={class:"carousel-content-right"},Uo={class:"carousel-description"},Go=["href"],Ko={class:"carousel-dots"},qo=["onClick","aria-label"],Vo={__name:"DestinationCarousel",setup(k){const f=[{location:"INDONESIA",title:"Komodo National Park",description:"Home to the legendary Komodo dragons and pristine marine life. Discover ancient wilderness and untouched natural beauty.",ctaText:"EXPLORE THE PARK",ctaLink:"#",image:No},{location:"INDONESIA",title:"Labuan Bajo",description:"Gateway to the Komodo Islands with stunning sunsets and vibrant culture. Experience the perfect blend of adventure and relaxation.",ctaText:"DISCOVER LABUAN BAJO",ctaLink:"#",image:Io},{location:"INDONESIA",title:"Togean Islands",description:"Remote paradise with crystal-clear waters and untouched coral reefs. A hidden gem for those seeking true escape.",ctaText:"VISIT TOGEAN",ctaLink:"#",image:Ao}],d=m(0),b=m(typeof window<"u"?window.innerWidth:1200),v=D(()=>f[d.value]),h=D(()=>b.value<=480?b.value*.765:b.value<=768?b.value*.675:Math.min(b.value*.5,750)),u=D(()=>b.value<=768?10:20),T=D(()=>d.value*(h.value+u.value)),H=D(()=>b.value<=480?"1.5rem":`calc(50% - ${h.value/2}px)`);function w(){d.value=(d.value+1)%f.length}function A(){d.value=(d.value-1+f.length)%f.length}function B(J){d.value=J}function M(){b.value=window.innerWidth}return ze(()=>{window.addEventListener("resize",M)}),Xe(()=>{window.removeEventListener("resize",M)}),(J,P)=>(o(),i("section",Mo,[P[3]||(P[3]=e("h2",{class:"carousel-heading"}," Destinations. Where our passion meets your purpose. ",-1)),P[4]||(P[4]=e("p",{class:"carousel-subheading"},[e("a",{href:"#"},[Y("WHERE NEXT: VIEW ALL DESTINATIONS "),e("span",null,"→")])],-1)),e("div",Po,[e("button",{class:"carousel-nav carousel-nav-left",onClick:A,"aria-label":"Previous destination"},[...P[0]||(P[0]=[e("img",{src:Ns,alt:"Previous"},null,-1)])]),e("div",Ro,[e("div",{class:"carousel-track",style:St({transform:`translateX(-${T.value}px)`,paddingLeft:H.value})},[(o(),i(G,null,te(f,(ue,j)=>e("div",{key:j,class:q(["carousel-slide",{"active-slide":j===d.value}]),style:St({width:`${h.value}px`,marginRight:`${u.value}px`})},[e("img",{src:ue.image,alt:ue.title,class:"slide-image"},null,8,Eo)],6)),64))],4)]),e("button",{class:"carousel-nav carousel-nav-right",onClick:w,"aria-label":"Next destination"},[...P[1]||(P[1]=[e("img",{src:Is,alt:"Next"},null,-1)])])]),e("div",Oo,[e("div",Lo,[e("span",Bo,c(v.value.location),1),e("h3",zo,c(v.value.title),1)]),e("div",Fo,[e("p",Uo,c(v.value.description),1),e("a",{href:v.value.ctaLink,class:"carousel-cta"},[Y(c(v.value.ctaText)+" ",1),P[2]||(P[2]=e("span",null,"→",-1))],8,Go)])]),e("div",Ko,[(o(),i(G,null,te(f,(ue,j)=>e("button",{key:j,class:q(["carousel-dot",{active:j===d.value}]),onClick:E=>B(j),"aria-label":`Go to slide ${j+1}`},null,10,qo)),64))])]))}},Ho=qe(Vo,[["__scopeId","data-v-cbd2be63"]]),Wo=""+new URL("ship-phinisi-voyager-D5TceIuH.png",import.meta.url).href,Yo=""+new URL("ship-ocean-explorer-Yg5A13gl.png",import.meta.url).href,Jo=""+new URL("ship-coral-queen-DLsN9IeK.png",import.meta.url).href,jo=""+new URL("ship-sunset-cruiser-B6Je6v6A.png",import.meta.url).href,Xo=""+new URL("ship-island-hopper-zr6jDabx.png",import.meta.url).href,Zo=""+new URL("ship-reef-dancer-w9AhwkP8.png",import.meta.url).href,Qo={class:"ships-carousel"},ei={class:"ships-container"},ti={class:"ships-filters"},si=["onClick"],ai={class:"ships-slider-wrapper"},ni={class:"ships-slider-container"},oi=["disabled"],ii={class:"ships-viewport"},li={class:"ship-image-wrapper"},ri=["src","alt"],ui={class:"ship-info"},ci={class:"ship-location"},di={class:"ship-name"},vi=["disabled"],pi={__name:"ShipsCarousel",setup(k){const f=[{id:"all",name:"All"},{id:"komodo",name:"Komodo"},{id:"labuan-bajo",name:"Labuan Bajo"},{id:"togean",name:"Togean"}],d=[{id:1,name:"Phinisi Voyager",destination:"komodo",locationName:"Komodo National Park",image:Wo},{id:2,name:"Ocean Explorer",destination:"komodo",locationName:"Komodo National Park",image:Yo},{id:3,name:"Coral Queen",destination:"labuan-bajo",locationName:"Labuan Bajo",image:Jo},{id:4,name:"Sunset Cruiser",destination:"labuan-bajo",locationName:"Labuan Bajo",image:jo},{id:5,name:"Island Hopper",destination:"togean",locationName:"Togean Islands",image:Xo},{id:6,name:"Reef Dancer",destination:"togean",locationName:"Togean Islands",image:Zo}],b=m("all"),v=m(0),h=m(typeof window<"u"?window.innerWidth:1200),u=D(()=>b.value==="all"?d:d.filter(E=>E.destination===b.value)),T=D(()=>{if(h.value<=640)return h.value*.75;if(h.value<=900)return 300;const E=Math.min(h.value-80,1400),$=32*2;return(E-$)/3}),H=D(()=>h.value<=640?16:32),w=D(()=>v.value*(T.value+H.value)),A=D(()=>h.value<=640?1:h.value<=900?2:3),B=D(()=>u.value.length>A.value),M=D(()=>Math.max(0,u.value.length-A.value));function J(E){b.value=E,v.value=0}function P(){v.value<M.value&&v.value++}function ue(){v.value>0&&v.value--}function j(){h.value=window.innerWidth}return ze(()=>{window.addEventListener("resize",j)}),Xe(()=>{window.removeEventListener("resize",j)}),(E,$)=>(o(),i("section",Qo,[e("div",ei,[$[0]||($[0]=e("div",{class:"ships-header"},[e("h2",{class:"ships-heading"},"Explore our fleet collection"),e("p",{class:"ships-description"}," Our fleet of luxury vessels are designed for intimate journeys through Indonesia's most spectacular waters. Each ship offers unique experiences, from traditional phinisi craftsmanship to modern expedition yachts, ensuring unforgettable adventures across the archipelago. ")],-1)),e("div",ti,[(o(),i(G,null,te(f,z=>e("button",{key:z.id,class:q(["filter-btn",{active:b.value===z.id}]),onClick:ae=>J(z.id)},c(z.name),11,si)),64))])]),e("div",ai,[e("div",ni,[B.value?(o(),i("button",{key:0,class:"ships-nav ships-nav-left",onClick:ue,disabled:v.value===0,"aria-label":"Previous ships"},[...$[1]||($[1]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"15 18 9 12 15 6"})],-1)])],8,oi)):R("",!0),e("div",ii,[de(dt,{name:"slide-up",mode:"out-in"},{default:De(()=>[(o(),i("div",{class:"ships-track-wrapper",key:b.value},[e("div",{class:"ships-track",style:St({transform:`translateX(-${w.value}px)`})},[(o(!0),i(G,null,te(u.value,z=>(o(),i("div",{key:z.id,class:"ship-card",style:St({width:`${T.value}px`,marginRight:`${H.value}px`})},[e("div",li,[e("img",{src:z.image,alt:z.name,class:"ship-image"},null,8,ri)]),e("div",ui,[e("span",ci,c(z.locationName),1),e("h3",di,c(z.name),1)])],4))),128))],4)]))]),_:1})]),B.value?(o(),i("button",{key:1,class:"ships-nav ships-nav-right",onClick:P,disabled:v.value>=M.value,"aria-label":"Next ships"},[...$[2]||($[2]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"9 18 15 12 9 6"})],-1)])],8,vi)):R("",!0)])])]))}},mi=qe(pi,[["__scopeId","data-v-5cc2e915"]]),fi=""+new URL("activity-snorkeling-B8hwZN3L.png",import.meta.url).href,gi=""+new URL("activity-relaxing-DX-9w-xF.png",import.meta.url).href,hi=""+new URL("activity-hiking-chrel6lc.png",import.meta.url).href,yi=""+new URL("activity-community-B7vG2Gb2.png",import.meta.url).href,bi=""+new URL("activity-wildlife-CZn9_LiH.png",import.meta.url).href,ki=""+new URL("activity-beach-oc9adSOS.png",import.meta.url).href,wi=""+new URL("activity-stargazing-BA4hSomZ.png",import.meta.url).href,_i={class:"activities-carousel","data-nav-theme":"light"},$i={class:"activities-slider"},Ci=["src","alt"],Si={class:"activity-info"},Di={class:"activity-title"},xi={class:"activity-desc"},Ti={class:"activities-dots"},Ni=["onClick","aria-label"],Ii=["disabled"],Ai=["disabled"],Mi={__name:"ActivitiesCarousel",setup(k){const f=[{title:"Snorkeling & Diving",description:"Explore vibrant coral reefs and marine life",image:fi},{title:"Relaxing & Sunbathing",description:"Unwind on pristine decks and secluded beaches",image:gi},{title:"Hiking & Viewpoints",description:"Trek to breathtaking panoramic vistas",image:hi},{title:"Local Community Immersion",description:"Connect with authentic Indonesian culture",image:yi},{title:"Wildlife Spotting",description:"Encounter Komodo dragons in their habitat",image:bi},{title:"Beach Exploration",description:"Discover hidden coves and pristine shores",image:ki},{title:"Stargazing",description:"Marvel at the Milky Way from open waters",image:wi}],d=m(0),b=m(typeof window<"u"?window.innerWidth:1200),v=D(()=>b.value<=768?b.value:b.value*.35),h=D(()=>d.value*v.value),u=D(()=>b.value<=768?f.length-1:f.length-2);function T(){d.value<u.value&&d.value++}function H(){d.value>0&&d.value--}function w(B){d.value=Math.min(B,u.value)}function A(){b.value=window.innerWidth}return ze(()=>{window.addEventListener("resize",A)}),Xe(()=>{window.removeEventListener("resize",A)}),(B,M)=>(o(),i("section",_i,[M[2]||(M[2]=e("div",{class:"activities-content"},[e("h2",{class:"activities-heading"},"What to experience?"),e("p",{class:"activities-description"}," From underwater adventures to peaceful sunsets, our carefully curated activities invite you to discover the magic of Indonesia's hidden treasures. Every moment is designed to awaken your senses and create lasting memories. "),e("button",{class:"activities-cta"},"Explore activities")],-1)),e("div",$i,[e("div",{class:"activities-track",style:St({transform:`translateX(-${h.value}px)`})},[(o(),i(G,null,te(f,(J,P)=>e("div",{key:P,class:q(["activity-slide",{active:P===d.value}])},[e("img",{src:J.image,alt:J.title,class:"activity-image"},null,8,Ci),e("div",Si,[e("h3",Di,c(J.title),1),e("p",xi,c(J.description),1)])],2)),64))],4)]),e("div",Ti,[(o(),i(G,null,te(f,(J,P)=>me(e("button",{key:P,class:q(["activity-dot",{active:P===d.value}]),onClick:ue=>w(P),"aria-label":`Go to ${f[P].title}`},null,10,Ni),[[Ea,P<=u.value]])),64))]),e("button",{class:"activities-nav activities-nav-left",onClick:H,disabled:d.value===0},[...M[0]||(M[0]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"15 18 9 12 15 6"})],-1)])],8,Ii),e("button",{class:"activities-nav activities-nav-right",onClick:T,disabled:d.value>=u.value},[...M[1]||(M[1]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"9 18 15 12 9 6"})],-1)])],8,Ai)]))}},Pi=qe(Mi,[["__scopeId","data-v-fa7e4a9d"]]),Ri=""+new URL("home-landscape-wPTuluZw.png",import.meta.url).href,Ei=""+new URL("home-conservation-DjIfDkiI.png",import.meta.url).href,Oi=""+new URL("home-culture-DX4UewC_.png",import.meta.url).href,Li=""+new URL("home-legacy-Dkg62GSZ.png",import.meta.url).href,Bi=["muted"],zi=["aria-label"],Fi={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Ui={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Gi={class:"komodo-section"},Ki={class:"komodo-content"},qi=["src"],Vi={class:"komodo-section section-alt"},Hi={class:"komodo-content reverse"},Wi=["src"],Yi={class:"komodo-section"},Ji={class:"komodo-content"},ji=["src"],Xi={class:"komodo-section section-alt"},Zi={class:"komodo-content reverse"},Qi=["src"],el={class:"home-footer"},tl={class:"home-footer-inner container"},sl={class:"hf-top"},al={class:"hf-links"},nl={class:"hf-bottom"},ol={class:"hf-copyright"},il={__name:"Home",setup(k){const f=ss(),d=m(!1),b=m(!0),v=m(null),h=m(null),u=m(null),T=m(null),H=m(null),w=m(null),A=m(null),B=m(null),M=m(null),J=m(null);let P=null;function ue(){[{container:u.value,img:T.value},{container:H.value,img:w.value},{container:A.value,img:B.value},{container:M.value,img:J.value}].forEach(x=>{if(!x.container||!x.img)return;const Re=x.container.getBoundingClientRect(),Ie=window.innerHeight;if(Re.top<Ie&&Re.bottom>0){const Ae=Ie/2-(Re.top+Re.height/2),K=.15;x.img.style.transform=`translateY(${Ae*K}px)`}})}let j=!1;function E(){j||(window.requestAnimationFrame(()=>{ue(),j=!1}),j=!0)}function $(){b.value=!b.value,!b.value&&v.value&&v.value.play().catch(()=>{})}function z(oe){oe.forEach(x=>{!x.isIntersecting&&!b.value&&(b.value=!0)})}ze(()=>{P=new IntersectionObserver(z,{threshold:.1}),h.value&&P.observe(h.value),window.addEventListener("scroll",E),ue()}),Xe(()=>{window.removeEventListener("scroll",E),P&&P.disconnect()});function ae(){d.value=!0}function ne(){d.value=!1}function xe(){d.value=!1,f.push("/results")}return(oe,x)=>(o(),i(G,null,[e("section",{class:"hero-section",ref_key:"heroSectionRef",ref:h},[e("video",{class:"hero-bg-video",autoplay:"",muted:b.value,loop:"",playsinline:"",ref_key:"heroVideo",ref:v},[...x[0]||(x[0]=[e("source",{src:To,type:"video/mp4"},null,-1)])],8,Bi),x[3]||(x[3]=e("div",null,[e("h1",{class:"hero-title"},"Shores of Wonder"),e("p",{class:"hero-sub"}," Embark on an exclusive voyage through the Komodo Islands. ")],-1)),e("button",{class:"hero-sound-control",onClick:$,"aria-label":b.value?"Unmute":"Mute"},[b.value?(o(),i("svg",Fi,[...x[1]||(x[1]=[e("path",{d:"M11 5L6 9H2v6h4l5 4V5z"},null,-1),e("line",{x1:"23",y1:"9",x2:"17",y2:"15"},null,-1),e("line",{x1:"17",y1:"9",x2:"23",y2:"15"},null,-1)])])):(o(),i("svg",Ui,[...x[2]||(x[2]=[e("path",{d:"M11 5L6 9H2v6h4l5 4V5z"},null,-1),e("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"},null,-1)])]))],8,zi)],512),de(Ho),e("section",Gi,[e("div",Ki,[x[5]||(x[5]=e("div",{class:"komodo-text"},[e("h2",{class:"komodo-heading"}," From calm waters to soulful treks with ancient Komodo dragons, a golden thread throughout every Komodo Cruises experience is a deep reverence for the wild and its power to heal. "),e("p",{class:"komodo-paragraph"}," Our phinisi vessels and curated voyages across the Komodo Islands have been intentionally designed to offer guests the freedom to reflect and feel their senses awaken, inviting in wonder and a wholeness that comes from truly leaning into nature. ")],-1)),e("div",{class:"komodo-media",ref_key:"mediaRef1",ref:u},[e("img",{src:Se(Ri),alt:"Komodo landscape",loading:"lazy",ref_key:"imgRef1",ref:T},null,8,qi),x[4]||(x[4]=e("button",{class:"play-button","aria-label":"Play video"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"white"},[e("polygon",{points:"5,3 19,12 5,21"})])],-1))],512)])]),e("section",Vi,[e("div",Hi,[x[6]||(x[6]=e("div",{class:"komodo-text"},[e("h2",{class:"komodo-heading"}," Dedicated to environmentally conscious hospitality, sustainable conservation, and collaborating with local communities since 2015. "),e("p",{class:"komodo-paragraph"}," The Komodo Cruises experience is an invitation to share in our love and care for the natural world, to be part of something meaningful, far-reaching, and much bigger than ourselves. ")],-1)),e("div",{class:"komodo-media",ref_key:"mediaRef2",ref:H},[e("img",{src:Se(Ei),alt:"Conservation efforts",loading:"lazy",ref_key:"imgRef2",ref:w},null,8,Wi)],512)])]),e("section",Yi,[e("div",Ji,[x[7]||(x[7]=e("div",{class:"komodo-text"},[e("h2",{class:"komodo-heading"},"Telling Komodo's stories."),e("p",{class:"komodo-subheading"},' Komodo Cruises means "Place of Dragons" in local lore. '),e("p",{class:"komodo-paragraph"}," Our people are an integral of the Komodo Cruises experience, sharing their passion for Indonesia's natural spaces and rich cultures through stories and experiences designed to bring you closer to both. In doing so, we hope to show you the incredible diversity and inspiration that can be found here, and remind you that you always have a home to come back to in Komodo. ")],-1)),e("div",{class:"komodo-media",ref_key:"mediaRef3",ref:A},[e("img",{src:Se(Oi),alt:"Komodo stories",loading:"lazy",ref_key:"imgRef3",ref:B},null,8,ji)],512)])]),e("section",Xi,[e("div",Zi,[x[8]||(x[8]=Oe('<div class="komodo-text"><p class="komodo-subheading">A legacy unfolds</p><h2 class="komodo-heading"> Komodo Cruises started in 2015 with a simple wooden boat and a deep passion for the ocean. </h2><p class="komodo-paragraph"> This was the start of a legacy that has unfolded over decades – and the origin of a brand inspired by family values and an abiding sense of purpose that offers guests profound wildlife encounters in Indonesia. </p><div style="margin-top:1.5rem;"><button class="hero-cta" style="color:#333;border:1px solid rgba(0, 0, 0, 0.2);background:transparent;padding:0.8rem 2rem;font-size:0.95rem;text-transform:uppercase;letter-spacing:0.05em;"> Our Story </button></div></div>',1)),e("div",{class:"komodo-media",ref_key:"mediaRef4",ref:M},[e("img",{src:Se(Li),alt:"Our story",loading:"lazy",ref_key:"imgRef4",ref:J},null,8,Qi)],512)])]),de(Pi),de(mi),e("footer",el,[e("div",tl,[e("div",sl,[x[12]||(x[12]=e("div",{class:"hf-brand"},[e("div",{class:"hf-logo"},"KOMODO CRUISES"),e("div",{class:"hf-copy"},"Rare journeys across the Komodo Islands.")],-1)),e("nav",al,[e("a",{href:"#",onClick:re(ae,["prevent"])},"Plan your trip"),x[9]||(x[9]=e("a",{href:"#"},"Experiences",-1)),x[10]||(x[10]=e("a",{href:"#"},"Our story",-1)),x[11]||(x[11]=e("a",{href:"#"},"Contact",-1))]),x[13]||(x[13]=Oe('<div class="hf-contact"><div class="hf-contact-title">Contact Us</div><div class="hf-contact-phone"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg><a href="tel:+6285282296450">+62 852-8229-6450</a></div><div class="hf-contact-address"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg><span>Graha Permata Pancoran, Jl. KH. Guru Amin Blok A5, Pancoran, Jakarta Selatan 12780</span></div></div>',1))]),e("div",nl,[e("div",ol," © "+c(new Date().getFullYear())+" Komodo Cruises | PT CANARD MONEY INDONESIA ",1),x[14]||(x[14]=e("div",{class:"hf-disclaimer"}," All voyages subject to weather and park regulations. ",-1))])])]),de(os,{isOpen:d.value,onClose:ne,onNavigateToResults:xe},null,8,["isOpen"])],64))}},wt=""+new URL("down-arrow-BfUnB_1G.svg",import.meta.url).href,_t=""+new URL("up-arrow-CozmStYp.svg",import.meta.url).href,ll="https://komodo-cruises-production-0c52.up.railway.app";async function rl(k){try{const f=await fetch(`${ll}/api/create-invoice`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:k.amount,payerEmail:k.payerEmail,description:k.description,customerName:k.customerName,customerPhone:k.customerPhone,items:k.items,successRedirectUrl:k.successRedirectUrl||`${window.location.origin}/payment-success`,failureRedirectUrl:k.failureRedirectUrl||`${window.location.origin}/payment-failed`})}),d=await f.json();if(!f.ok)throw new Error(d.message||"Failed to create invoice");return d}catch(f){throw console.error("Error creating Xendit invoice:",f),f}}function ul(k){if(k)window.location.href=k;else throw new Error("Invoice URL is required")}function at(k){if(!k)return 0;if(typeof k=="number")return k;const f=String(k).replace(/[^\d.,]/g,"").replace(/\./g,"").replace(/,/g,"");return parseInt(f)||0}const cl={class:"results-wrap"},dl={class:"results-container"},vl={class:"results-layout"},pl={class:"results-main"},ml={key:0,class:"loading-state"},fl={key:1,class:"error-state"},gl={class:"error-message"},hl={key:2},yl={class:"results-intro"},bl={key:0,class:"success-message"},kl={key:1,class:"no-availability"},wl={key:0,class:"results-controls"},_l={class:"results-controls-left"},$l=["aria-expanded"],Cl=["src"],Sl=["onClick"],Dl={class:"results-controls-right"},xl={class:"results-count"},Tl={key:1,class:"lodge-results"},Nl={class:"cabin-image",style:{position:"relative",overflow:"hidden"}},Il=["src","alt","onError"],Al=["onClick"],Ml=["onClick"],Pl={class:"cabin-content"},Rl={class:"cabin-header"},El={class:"cabin-title-group"},Ol={class:"cabin-name"},Ll={class:"cabin-badge active"},Bl={class:"cabin-specs"},zl={class:"cabin-overview"},Fl={class:"overview-list"},Ul={key:0,class:"overview-list"},Gl=["onClick"],Kl={key:0,class:"trips-section"},ql={class:"trip-primary"},Vl={class:"trip-primary-info"},Hl={class:"trip-primary-date"},Wl={class:"trip-primary-rooms"},Yl=["onClick"],Jl={key:1,class:"more-dates-list"},jl=["onClick"],Xl={class:"trip-alt-info"},Zl={class:"trip-alt-date"},Ql={class:"trip-alt-rooms"},er={class:"cabin-info-section"},tr={class:"cabin-info-left"},sr={class:"price-main"},ar={class:"price-value"},nr={class:"cabin-info-right"},or=["onClick"],ir={key:2,class:"no-results"},lr={class:"sidebar-container"},rr={class:"sidebar-section check-availability-section"},ur={key:0,class:"sidebar-skeleton"},cr=["aria-expanded"],dr={class:"caret"},vr=["src"],pr=["onClick"],mr={class:"list-text result-list-text"},fr=["value"],gr=["aria-expanded"],hr={class:"caret"},yr=["src"],br={class:"dropdown-group-title"},kr={key:0,class:"muted"},wr=["onClick"],_r={class:"list-text result-list-text"},$r=["value"],Cr={key:0,class:"muted"},Sr=["aria-expanded"],Dr={class:"caret"},xr=["src"],Tr={class:"simple-guests"},Nr={class:"simple-guests-ctrls"},Ir={class:"count"},Ar=["aria-expanded"],Mr={class:"caret"},Pr=["src"],Rr={class:"custom-calendar"},Er={class:"calendar-header"},Or={class:"calendar-title"},Lr={class:"calendar-grid"},Br={class:"calendar-days"},zr=["disabled","onClick"],Fr={key:0,class:"itinerary-sidebar"},Ur={key:0,class:"itinerary-empty"},Gr={key:1,class:"itinerary-list"},Kr={class:"itinerary-item-header"},qr={class:"itinerary-lodge-name"},Vr=["onClick"],Hr={class:"itinerary-cabin-name"},Wr={class:"itinerary-guests"},Yr={class:"itinerary-price"},Jr={class:"itinerary-dates"},jr={key:2,class:"itinerary-total"},Xr={class:"itinerary-total-row"},Zr={class:"itinerary-total-amount"},Qr={class:"itinerary-total-note"},eu={key:0,class:"itinerary-total-note"},tu={key:3,class:"itinerary-total-note"},su={class:"modal-body modal-body-redesigned"},au={class:"modal-info-section modal-info-left"},nu={class:"modal-cabin-header"},ou={class:"modal-cabin-name"},iu={class:"modal-cabin-specs"},lu={class:"modal-cabin-quote"},ru={class:"modal-overview-section"},uu={class:"modal-overview-grid"},cu={class:"modal-overview-list"},du={key:0,class:"modal-overview-list"},vu={class:"modal-amenities-section"},pu={class:"modal-amenities-grid"},mu={class:"modal-amenities-list"},fu={key:0,class:"modal-amenities-list"},gu={class:"modal-image-section modal-image-right"},hu=["src","alt"],yu={class:"modal-image-indicator"},bu={class:"indicator-count"},ku={class:"modal-bottom-section"},wu={class:"modal-rate-info"},_u={class:"modal-price-display"},$u={class:"price-amount"},Cu={key:0,class:"price-label"},Su={class:"guest-modal-body"},Du={class:"guest-counter-section"},xu={class:"guest-counter-row"},Tu={class:"guest-counter-controls"},Nu=["disabled"],Iu={class:"guest-counter-value"},Au=["disabled"],Mu={class:"guest-available-note"},Pu={key:0},Ru={key:2,class:"enquiry-modal-overlay"},Eu={class:"enquiry-modal-content"},Ou={class:"enquiry-modal-body"},Lu={class:"enquiry-form-section"},Bu={class:"form-row"},zu={class:"form-group form-group-small"},Fu={class:"form-group"},Uu={class:"form-group"},Gu={class:"form-row"},Ku={class:"form-group"},qu={class:"phone-input"},Vu={class:"form-group"},Hu={class:"form-row"},Wu={class:"form-group"},Yu={class:"form-group"},Ju={class:"form-group"},ju={class:"form-group"},Xu={class:"form-checkboxes"},Zu={class:"checkbox-label"},Qu={class:"checkbox-label"},ec=["disabled"],tc={class:"enquiry-summary-section"},sc={class:"summary-items"},ac={class:"summary-item-header"},nc={class:"summary-lodge-name"},oc={class:"summary-item-details"},ic={class:"summary-cabin"},lc={class:"summary-guests"},rc={class:"summary-dates"},uc={key:0,class:"summary-pricing"},cc={class:"pricing-row"},dc={class:"pricing-value"},vc={class:"pricing-row"},pc={class:"pricing-label"},mc={class:"pricing-value"},fc={key:0,class:"enquiry-total-section"},gc={class:"enquiry-total"},hc={class:"enquiry-total-row"},yc={class:"enquiry-total-amount"},bc={key:1,class:"enquiry-pricing-note"},kc={class:"home-footer"},wc={class:"home-footer-inner container"},_c={class:"hf-top"},$c={class:"hf-links"},Cc={class:"hf-bottom"},Sc={class:"hf-copyright"},nt="Rp",ts="Nusa Tenggara Timur",Dc={__name:"Results",setup(k){const f=m({}),d=m({});function b(s){if(!s||typeof s=="string")return[];const t=[];s.image_main&&t.push(s.image_main),Array.isArray(s.images)&&t.push(...s.images);for(let n=1;n<=10;n++){const r=`image_${n}`;s[r]&&t.push(s[r])}return t.filter(n=>!!n&&String(n).trim().length>0).map(fs)}function v(s){const t=b(s.detail)||[];return t.length?t:b(s.raw)||[]}function h(s){return f.value[s]||0}function u(s){return d.value[s]||"right"}function T(s,t,n,r){n>0?(f.value[s]=(t+n)%n,d.value[s]=r):(f.value[s]=0,d.value[s]="right")}function H(s){const t=Tt.value.find(r=>r.key===s);if(!t)return;const n=v(t);T(s,h(s)-1,n.length,"left")}function w(s){const t=Tt.value.find(r=>r.key===s);if(!t)return;const n=v(t);T(s,h(s)+1,n.length,"right")}const A=m(0);function B(){if(!K.value)return[];const s=v(K.value);return s.length?s:[K.value.image||"/src/images/cabin.jpg"]}function M(){const s=B(),t=A.value%(s.length||1);return s[t]||"/src/images/cabin.jpg"}function J(){const t=B().length||1;A.value=(A.value-1+t)%t}function P(){const t=B().length||1;A.value=(A.value+1)%t}ze(()=>{Cs(()=>{try{console.log("DEBUG selectedCabinDetail",ht.value),console.log("DEBUG selectedCabinPriceText",Ft.value)}catch(s){console.warn("DEBUG watchEffect error:",s)}})});const ue=ss(),j=m(!0),E=m(""),$=m(!1),z=m(null),ae=m({}),ne=m([]),xe=m(null),oe=m([]),x=m(null),Re=m(!1),Ie=m(!1),Ae=m(!1),K=m(null),Ve=m(1),ve=m(2),He=m(!1),V=m(""),y=m({}),we=m({}),N=m("recommended"),_e=m(!1),Fe=[{value:"recommended",label:"Recommended"},{value:"price_low",label:"Lowest Price"},{value:"price_high",label:"Highest Price"}],Me=["Komodo National Park","Labuan Bajo"],Ze=[],$e=m([]),Ge=m(!1),ge=m([]),Ce=m([]),Ee=m([]),ie=m(""),Te=m(""),We=m(2),S=m(0),l=m(0),_=m(0),Q=m(2),he=m(new Map),le=m(!1),se=m(!1),ke=m(!1),fe=m(!1),ot=m(!1),it=m(!1),vt=m(!1),Qe=m(!1),pt=m(null),mt=m(null),ft=m(null),gt=m(null),Dt=m(null),Ye=m(new Date().getMonth()),et=m(new Date().getFullYear());function is(){le.value=!1,se.value=!1,ke.value=!1,fe.value=!1}function xt(s){s==="regions"?(le.value=!le.value,se.value=ke.value=fe.value=!1):s==="ships"?(se.value=!se.value,le.value=ke.value=fe.value=!1):s==="guests"?(ke.value=!ke.value,le.value=se.value=fe.value=!1):s==="dates"&&(fe.value=!fe.value,le.value=se.value=ke.value=!1)}function zt(s){s==="regions"?(le.value=!1,se.value=!0,ke.value=fe.value=!1):s==="ships"?(se.value=!1,ke.value=!0,le.value=fe.value=!1):s==="guests"?(ke.value=!1,fe.value=!0,le.value=se.value=!1):s==="dates"&&is()}function As(s){const t=ge.value.indexOf(s);t>=0?ge.value.splice(t,1):ge.value.push(s)}function Ms(s){const t=Ce.value.indexOf(s);t>=0?Ce.value.splice(t,1):Ce.value.push(s)}function Ps(){Q.value=Math.min(16,(Q.value||0)+1)}function Rs(){Q.value=Math.max(1,(Q.value||1)-1)}D(()=>Sa());const Es=D(()=>`${["January","February","March","April","May","June","July","August","September","October","November","December"][Ye.value]} ${et.value}`),Os=D(()=>{const s=new Date(et.value,Ye.value,1),t=new Date(et.value,Ye.value+1,0),n=new Date(s),r=new Date;n.setDate(n.getDate()-n.getDay());const p=[],a=new Date(t);a.setDate(a.getDate()+(6-t.getDay()));for(let g=new Date(n);g<=a;g.setDate(g.getDate()+1)){g.getDay();const C=g.getMonth()===Ye.value,I=new Date(g);I.setHours(0,0,0,0);const O=new Date(r);O.setHours(0,0,0,0);const L=I<O,U=C&&!L,X=Rt(g);let pe=!1,ee=!1,Z=!1;if(ie.value&&Te.value&&C){const ye=new Date(ie.value+"T00:00:00"),ce=new Date(Te.value+"T00:00:00");I>=ye&&I<=ce&&(pe=!0,I.getTime()===ye.getTime()&&(ee=!0),I.getTime()===ce.getTime()&&(Z=!0))}p.push({key:g.getTime(),date:g.getDate(),fullDate:X,isCurrentMonth:C,isSelectable:U,isPast:L,isSelected:ie.value===X||Te.value===X,isInRange:pe,isRangeStart:ee,isRangeEnd:Z})}return p});function ls(s){let t=Ye.value+s,n=et.value;t>11&&(t=0,n+=1),t<0&&(t=11,n-=1),Ye.value=t,et.value=n}function Ls(){ls(1)}function Bs(){ls(-1)}function zs(s){if(s.isSelectable)if(!ie.value||ie.value&&Te.value)ie.value=s.fullDate,Te.value="";else{const t=new Date(ie.value+"T00:00:00");new Date(s.fullDate+"T00:00:00")<t?(Te.value=ie.value,ie.value=s.fullDate):Te.value=s.fullDate}}const Fs=D(()=>{if(ge.value.length)return ge.value[0];const s=z.value;return Array.isArray(s==null?void 0:s.destinations)&&s.destinations.length?s.destinations[0]:ts});D(()=>{var r,p,a;const s=z.value;if(!s)return[];const t=s.ships&&s.ships.length?s.ships:s.lodges||[],n=[];for(const g of t){const C=ae.value[g]||[];let I=0,O=0;for(const ce of C){const W=(((r=ce==null?void 0:ce.operators)==null?void 0:r.flatMap(be=>be.cabins||[]))||[]).reduce((be,Ne)=>{const Ke=String(Ne).match(/\((\d+)\)/);return be+(Ke?parseInt(Ke[1],10):0)},0);I+=W,O+=W}const L=C.length,U=L>0?I/L:0,X=U>=(s.totalGuests||0),pe=Math.max(1,s.totalGuests||(s.adults||0)+(s.children||0)),ee=C.find(ce=>(ce==null?void 0:ce.date)===s.dateFrom)||C[0],ye=(((a=(p=ee==null?void 0:ee.operators)==null?void 0:p[0])==null?void 0:a.cabins)||[]).reduce((ce,Be)=>{const W=String(Be).match(/\((\d+)\)/),be=W?parseInt(W[1],10):0;return ce+(be>=pe?1:0)},0);n.push({lodge:g,hasAvailability:X,availableSlots:Math.floor(U),totalSlots:L>0?Math.floor(O/L):0,image:"/src/images/cabin.jpg",availableCabinsCount:ye,dateFrom:s.dateFrom})}return n});const Us=D(()=>{const s=z.value;if(!s)return[];const t=s.ships&&s.ships.length?s.ships:s.lodges||[],n=s.dateFrom,r=Math.max(1,s.totalGuests||(s.adults||0)+(s.children||0)),p=[],a=new Set;for(const g of t){const C=ae.value[g]||[],I=C.find(L=>(L==null?void 0:L.date)===n)||C[0],O=((I==null?void 0:I.operators)||[]).flatMap(L=>L.cabins||[]);for(const L of O){const U=Kt(L),X=ra(L),pe=typeof L=="string"?"":Vt(L);if(X==null||X>=r){const Z=(typeof L!="string"&&(L!=null&&L.id)?String(L.id).trim().toLowerCase():null)||`${Le(g)}|${tt(U)}`;if(a.has(Z))continue;a.add(Z),p.push({ship:g,cabinName:U,capacity:X,date:n,image:pe})}}}return p});D(()=>Us.value.map(s=>({cabinName:s.cabinName,ship:s.ship,date:s.date,capacity:s.capacity,image:s.image||"/src/images/cabin.jpg"}))),D(()=>{const s=z.value;return s?Math.max(1,s.totalGuests||(s.adults||0)+(s.children||0)):1});const ht=D(()=>{const s=K.value;if(!s)return null;if(s.detail)return s.detail;const t=he.value||new Map,n=`${Le(s.shipName||s.operatorLabel||"")}|${tt(s.cabinName)}`;return t.get(n)||null}),Gs=D(()=>{const s=ht.value;return((s==null?void 0:s.description)||(s==null?void 0:s.desc)||"").trim()||"If you are desperate for a vacation, bring your friends or family and step away from it all."}),Ft=D(()=>{const s=ht.value,t=s&&(typeof s.price=="number"?s.price:It(s))||It(K.value);if(t==null)return"";const n=Ht(t,nt);return n?Wt(n.amount,n.currency):""}),Ks=D(()=>{var n,r;const s=ht.value;return s!=null&&s.capacity?s.capacity:ys((n=K.value)==null?void 0:n.capacityText)||((r=K.value)==null?void 0:r.capacity)||""}),Ut=D(()=>{var g;const s=ht.value,t=s&&typeof s=="object"&&s.facilities?s.facilities:null,n={wifi:"Wi-Fi",starlink:"Starlink",jacuzzi:"Jacuzzi",indoor_jacuzzi:"Indoor jacuzzi",outdoor_jacuzzi:"Outdoor jacuzzi",indoor_lounge:"Indoor lounge",outdoor_lounge:"Outdoor lounge",sundeck:"Sundeck",seaview:"Sea view",balcony:"Balcony",private_bathroom:"Private bathroom",shower:"Shower",bathtub:"Bathtub",outdoor_bathtub:"Outdoor bathtub",king_bed:"King bed",bar:"Bar",hammock:"Hammock",smart_tv:"Smart TV",ac:"Air conditioning"},r=[];if(t)for(const[C,I]of Object.entries(n))t[C]&&r.push(I);if(r.length)return r;const p=[];return s&&(s.facility_text&&p.push(s.facility_text),s.facilities_text&&p.push(s.facilities_text),s.api_name&&p.push(s.api_name),s.description&&p.push(s.description)),(g=K.value)!=null&&g.capacityText&&p.push(K.value.capacityText),ca(p.join(" "))});D(()=>{const s=z.value;return s?Array.isArray(s.destinations)&&s.destinations.length?s.destinations.join(", "):s.destination||"":""});const qs=D(()=>{const s=z.value;if(!s)return[];const t=s.ships&&s.ships.length?s.ships:s.lodges||[],n=s.shipSheets&&s.shipSheets.length?s.shipSheets:[],r=new Set,p=a=>{const g=Le(String(a).replace(/normalized/gi,"").replace(/cruise schedule/gi,""));if(!g)return;r.add(g);const C=g.split(" ")[0];C&&r.add(C)};return t.forEach(p),n.forEach(p),Array.from(r)}),Tt=D(()=>{const s=z.value,t=xe.value;if(!s||!t||!Array.isArray(t.operators))return[];const n=qs.value,r=he.value||new Map,p=new Map;for(const I of t.operators){const O=I.operator,L=I.cabins||[];for(const U of L){const X=ds(U);if(X!=null&&X<=0)continue;const pe=Kt(U),ee=vs(U),Z=It(U),ye=aa(U,O);if(n.length&&!ua(ye,n))continue;const ce=typeof U!="string"&&(U!=null&&U.id)?String(U.id).trim().toLowerCase():null,Be=tt(pe),W=typeof U!="string"&&(U.start_date||U.date)||"",be=ce||`${Le(ye)}|${Be}|${W}`||`${Le(O)}|${Be}|${W}`,Ne=r.get(`${Le(ye)}|${Be}`),Ke=It(Ne)||Z,st=vs(Ne)||ee,_s=ds(Ne),bt=_s??X,Da=Vt(Ne)||Vt(U)||"/src/images/cabin.jpg",xa=typeof U!="string"?U.trip_days||U.days:null,Ta=Ne?Ne.trip_days||Ne.days:null,Na=xa||Ta||null,Ia=(typeof U!="string"?U.start_date||U.date:null)||s.dateFrom,$s=p.get(be),Aa={key:be,operatorLabel:O,shipName:ye,cabinName:pe,available:bt,availableText:bt!=null?`${bt} available`:"Available",price:Ke,capacityText:st,date:Ia,tripDays:Na,image:Da,raw:U,detail:Ne};if(!$s)p.set(be,Aa);else{const Ue={...$s};Ue.available==null&&bt!=null&&(Ue.available=bt),!Ue.price&&Ke&&(Ue.price=Ke),!Ue.capacityText&&st&&(Ue.capacityText=st),Ue.availableText=Ue.available!=null?`${Ue.available} available`:"Available",p.set(be,Ue)}}}const a=Array.from(p.values());a.sort((I,O)=>(I.operatorLabel||"").localeCompare(O.operatorLabel||"")||(I.cabinName||"").localeCompare(O.cabinName||""));const g=s.dateFrom,C=s.dateTo;return g&&C?a.filter(O=>{const L=At(O);return L?ia(O.date,L,g,C):!0}):a}),Vs=D(()=>{const s=Tt.value,t=new Map;for(const n of s){const r=`${n.shipName||n.operatorLabel}|${n.cabinName}`;t.has(r)||t.set(r,{...n,trips:[],totalAvailable:0});const p=t.get(r),a=n.date||"",g=Number(n.tripDays||At(n))||3;if(!a)continue;const C=new Date(a+"T00:00:00");let I=!1;for(const O of p.trips){const L=new Date(O.date+"T00:00:00"),U=Number(O.tripDays)||3,X=new Date(L);if(X.setDate(X.getDate()+U-1),C>=L&&C<=X){I=!0;break}}if(!I){const O={date:n.date,tripDays:g,available:n.available||1,key:n.key,originalItem:n};p.trips.push(O),p.totalAvailable+=O.available||1,n.price&&(!p.price||at(n.price)<at(p.price))&&(p.price=n.price)}}return Array.from(t.values()).map(n=>{var p;const r=n.trips.sort((a,g)=>new Date(a.date)-new Date(g.date));return{id:n.key,uniqueKey:`${n.shipName}|${n.cabinName}`,title:n.cabinName,subtitle:Hs(n.operatorLabel),image:n.image,prices:[{label:"Start from",value:n.price||"Rp3,650,000"}],availabilityCount:n.totalAvailable>1?`${n.totalAvailable} rooms available`:n.availableText,tripsCount:r.length,trips:r,date:lt((p=r[0])==null?void 0:p.date),availabilityType:"standard",availabilityTitle:"Great news, we have availability!",availabilityText:"Select the result that best suits you from the list below and it will be added to the itinerary summary on the right.",originalItem:n,isGallery:!0}})}),yt=D(()=>{const s=[...Vs.value];return N.value==="price_low"?s.sort((t,n)=>{var a,g,C,I;const r=at(((g=(a=t.prices)==null?void 0:a[0])==null?void 0:g.value)||"0"),p=at(((I=(C=n.prices)==null?void 0:C[0])==null?void 0:I.value)||"0");return r-p}):N.value==="price_high"&&s.sort((t,n)=>{var a,g,C,I;const r=at(((g=(a=t.prices)==null?void 0:a[0])==null?void 0:g.value)||"0");return at(((I=(C=n.prices)==null?void 0:C[0])==null?void 0:I.value)||"0")-r}),s}),Gt=D(()=>{const s=x.value||{},t=ys(s.capacityText);return t||(s.available&&s.available>0?s.available*4:16)}),Je=D(()=>{const s=oe.value||[];if(!s.length)return{hasPrice:!1,total:0,formattedTotal:"",pricedCount:0,missingCount:0};let t="",n=0,r=0;for(const a of s){const g=Ht(a==null?void 0:a.price,t||nt);if(!g||(t||(t=g.currency),t&&g.currency&&t!==g.currency))continue;const C=Number((a==null?void 0:a.guests)||2),I=Number(g.amount)*(Number.isFinite(C)?C:2);n+=I,r++}const p=r>0;return{hasPrice:p,total:n,formattedTotal:p?Wt(n,t||nt):"",pricedCount:r,missingCount:s.length-r}});function lt(s){return s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}function rs(s,t){if(!s)return"";const n=new Date(s+"T00:00:00"),r=Number(t)||1;if(r<=1)return lt(s);const p=new Date(n);p.setDate(p.getDate()+r-1);const a=n.toLocaleDateString("en-US",{month:"short",day:"numeric"}),g=p.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${a} - ${g}`}function us(s){return s?Ca(s,2):""}function Hs(s){if(!s)return"";const t=s.trim().split(/[\s(]+/)[0];return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function Ws(s,t){V.value=t.key,s.originalItem&&(s.originalItem.selectedTrip=t),y.value[t.key]||(y.value[t.key]=1)}function Ys(s){we.value[s]=!we.value[s]}function rt(s){return!s.trips||s.trips.length===0?null:s.trips.find(n=>n.key===V.value)||s.trips[0]}function Js(s){if(!s.trips||s.trips.length<=1)return[];const t=rt(s);return s.trips.filter(n=>n.key!==t.key)}function js(s){const t=rt(s);if(!t){console.warn("No trip selected");return}const n={...s.originalItem,date:t.date,tripDays:t.tripDays,available:t.available,selectedTrip:t};typeof Jt=="function"?Jt(n):ks(n)}async function Xs(){Ge.value=!0;try{const s=await xs();if($e.value=(s.operators||[]).map(t=>{var p,a;const n=((p=t.operator)==null?void 0:p.trim())||"",r=((a=t.sourceSheet)==null?void 0:a.trim())||n;return{id:`${n}__${r}`,label:n,sheet:r}}).filter(t=>t.label&&t.sheet),!Ce.value.length&&Ee.value.length){const t=[];for(const n of Ee.value){const r=$e.value.find(p=>p.label===n.label&&p.sheet===(n.sheet||p.sheet));r&&t.push(r.id)}Ce.value=t}}catch(s){console.warn("Failed to load operators:",s),$e.value=Ze.map(t=>({id:t.id||`${t.label||""}__${t.sheet||""}`,label:t.label,sheet:t.sheet||t.label}))}finally{Ge.value=!1}}async function Zs(){try{const t=await fetch("https://script.google.com/macros/s/AKfycbwvfIHPdbGq7cVlbX6g1IPoBdE2xIqYD9fZJclMlq9AYAFGa--e3eGV15HbYfrj2z4vLw/exec?resource=cabindetail").then(r=>r.json()),n=new Map;t&&Array.isArray(t.data)&&t.data.forEach(r=>{const p=Kt(r),a=r.operator||r.shipName||"",g=`${Le(a)}|${tt(p)}`;g.trim()&&n.set(g,r)}),he.value=n}catch(s){console.warn("Failed to load cabindetail API",s)}}async function Nt(){if(z.value){j.value=!0,E.value="",ae.value={},ne.value=[],xe.value=null;try{const s=z.value,t=ws(s.dateFrom,s.dateTo),n=s.ships&&s.ships.length?s.ships:s.lodges||[],r=s.shipSheets&&s.shipSheets.length?s.shipSheets:n;let p=null;const a=()=>(p||(p=Ds("Cruise Schedule - Normalized").catch(()=>null)),p),g={};await Promise.all(r.map(async(O,L)=>{const U=n[L]||O;let X=[];try{const pe=await Ds(O);Array.isArray(pe==null?void 0:pe.allCabins)&&(X=pe.allCabins.map(ee=>String(ee).split(" (")[0].trim()))}catch{}if(X.length===0)try{const pe=await a();if(pe){const ee=Le(U),Z=(pe.operators||[]).find(ye=>Le(ye.operator)===ee);Z&&Array.isArray(Z.cabins)&&(X=Z.cabins.map(ye=>String(ye).split(" (")[0].trim()))}}catch{}g[O]=Array.from(new Set(X.map(tt)))}));const C=await Promise.all(r.map(async(O,L)=>{var Be;const U=n[L]||O,X=g[O]||[],pe=t.map(W=>Ot(W,O).catch(()=>null)),ee=await Promise.all(pe),Z=ee.map((W,be)=>!W||!W.operators||W.operators.length===0?be:-1).filter(W=>W>=0);let ye=[];if(Z.length){const W=Z.map(Ne=>Ot(t[Ne],"Cruise Schedule - Normalized").catch(()=>null));ye=await Promise.all(W)}const ce=[];for(let W=0;W<t.length;W++){const be=ee[W]&&ee[W].operators&&ee[W].operators.length?ee[W]:Z.includes(W)?ye[Z.indexOf(W)]:null;if(be){const Ne=((Be=be.operators)==null?void 0:Be.flatMap(st=>st.cabins||[]))||[],Ke=X.length?Ne.filter(st=>X.includes(tt(st))):Ne;ce.push({...be,operators:[{operator:U,total:Ke.length,cabins:Ke}]})}}return[U,ce]})),I={};for(const[O,L]of C)I[O]=L;if(ae.value=I,ne.value=Object.values(I).flat(),s!=null&&s.dateFrom)try{const L=ws(s.dateFrom,s.dateTo||s.dateFrom).map(async ee=>{let Z=await Ot(ee).catch(()=>null);return(!Z||!Z.operators||Z.operators.length===0)&&(Z=await Ot(ee,"Cruise Schedule - Normalized").catch(()=>null)),{date:ee,data:Z}}),U=await Promise.all(L),X=new Map;for(const{date:ee,data:Z}of U)if(!(!Z||!Z.operators))for(const ye of Z.operators){const ce=ye.operator;X.has(ce)||X.set(ce,{operator:ce,cabins:[]});const Be=X.get(ce);for(const W of ye.cabins||[]){const be=typeof W=="string"?{name:W,start_date:ee}:{...W,start_date:W.start_date||ee};Be.cabins.push(be)}}const pe={ok:!0,operators:Array.from(X.values()),total:Array.from(X.values()).reduce((ee,Z)=>ee+Z.cabins.length,0)};xe.value=pe}catch(O){console.debug("[Results] global availability error",O)}ne.value.length===0&&(E.value="No availability data found for the selected dates and ships.")}catch(s){E.value=`Failed to check availability: ${s.message}`,console.error("Availability check error:",s)}finally{j.value=!1}}}const Qs=()=>Nt(),ea=()=>Nt();function ta(){try{const s=$e.value.filter(p=>Ce.value.includes(p.id)),t=s.map(p=>p.label),n=s.map(p=>p.sheet),r={region:ts,destination:ge.value[0]||"",destinations:ge.value.slice(),ships:t,shipSheets:n,ship:t[0]||"",lodges:t.slice(),dateFrom:ie.value,dateTo:Te.value||ie.value,adults:Q.value,children:0,age3_9:0,age0_2:0,totalGuests:Q.value,timestamp:Date.now()};if(Ee.value=s.map(p=>({label:p.label,sheet:p.sheet})),localStorage.setItem("komodo_search_criteria",JSON.stringify(r)),z.value=r,ie.value){const p=new Date(ie.value);Ye.value=p.getMonth(),et.value=p.getFullYear()}Nt()}catch(s){console.error("Failed to apply sidebar changes",s),alert("Failed to apply changes")}}function sa(s){return[pt.value,mt.value,ft.value,gt.value].some(n=>n&&(n===s||n.contains(s)))}function cs(s){sa(s.target)||is()}document.addEventListener("click",cs),Oa(()=>{document.removeEventListener("click",cs)}),ze(async()=>{try{const s=localStorage.getItem("komodo_search_criteria");if(s){z.value=JSON.parse(s);const t=z.value||{};ge.value=Array.isArray(t.destinations)?t.destinations.slice():t.destination?[t.destination]:[];const n=Array.isArray(t.ships)?t.ships:[],r=Array.isArray(t.shipSheets)?t.shipSheets:[];if(Ee.value=n.map((p,a)=>({label:p,sheet:r[a]||""})),ie.value=t.dateFrom||"",Te.value=t.dateTo||"",We.value=t.adults??We.value,S.value=t.children??S.value,l.value=t.age3_9??l.value,_.value=t.age0_2??_.value,Q.value=t.totalGuests??We.value+S.value+l.value+_.value,ie.value){const p=new Date(ie.value);Ye.value=p.getMonth(),et.value=p.getFullYear()}}await Promise.all([Zs(),Xs(),Nt()])}catch(s){console.error("Failed to load search criteria:",s),E.value="Failed to load search criteria"}setTimeout(()=>{console.log("DEBUG all detailCabinMap keys:",Array.from(he.value.keys()))},2e3)}),Cs(()=>{if(K.value){const s=`${Le(K.value.shipName||K.value.operatorLabel||"")}|${tt(K.value.cabinName)}`;console.log("DEBUG selectedCabin key:",s)}});function Kt(s){if(!s)return"";if(typeof s=="string")return s.split(" (")[0].trim();const t=(s.name||s["cabin name"]||s.cabin_name||s.api_name||"").toString();return t?t.split("(")[0].trim():""}function ds(s){return!s||typeof s=="string"?null:typeof s.available=="number"?s.available:null}function vs(s){if(!s)return"";if(typeof s=="string"){const t=s.match(/\(([^)]+)\)$/);return t?t[1]:""}return typeof s.capacity=="number"?`${s.capacity} pax`:s.capacity?s.capacity:s.capacity_lock||""}function It(s){return!s||typeof s=="string"?"":s.price_lock||s.price||""}function aa(s,t){return s&&typeof s!="string"&&s.shipname?s.shipname:(t||"").replace(/\([^)]*\)/g,"").trim()}function qt(s){if(!s)return"CABIN";const t=s.detail||s;if(t.cabin_type||t.type)return(t.cabin_type||t.type).toUpperCase();const n=s.cabinName||s.name||"";return n.toLowerCase().includes("deluxe")?"DELUXE":n.toLowerCase().includes("suite")?"SUITE":n.toLowerCase().includes("master")?"MASTER":n.toLowerCase().includes("vip")?"VIP":"CABIN"}function na(s){if(!s)return 2;const t=s.detail||s;if(typeof t.capacity=="number")return t.capacity;const r=(t.capacityText||s.capacityText||"").match(/(\d+)/);return r?parseInt(r[1],10):2}function ps(s){if(!s)return"1 King";const t=s.detail||s;if(t.bed_type)return t.bed_type;const n=t.facilities||{};return n.king_bed?"1 King":n.twin_bed?"2 Twins":"1 King or 2 Twins"}function ms(s){if(!s)return"Private cabin";const t=s.detail||s;return t.size?t.size:t.area?t.area:"Private cabin"}function At(s){if(!s)return"";if(s.tripDays)return s.tripDays;const t=s.detail||s;if(t.trip_days)return t.trip_days;if(t.days)return t.days;if(s.raw&&typeof s.raw!="string"){if(s.raw.trip_days)return s.raw.trip_days;if(s.raw.days)return s.raw.days}return""}function oa(s,t){if(!s||!t)return null;const n=new Date(s+"T00:00:00"),r=new Date(n);return r.setDate(r.getDate()+(Number(t)-1)),r}function ia(s,t,n,r){if(!s||!t||!n||!r)return!0;const p=new Date(s+"T00:00:00"),a=oa(s,t),g=new Date(n+"T00:00:00"),C=new Date(r+"T00:00:00");return p<=C&&a>=g}function ut(s){if(!s)return["Private bathroom","Air conditioning","Sea view","Daily housekeeping","Private bathroom","Air conditioning"];const t=s.detail||s,n=[],r=t.facilities||{},p={wifi:"Complimentary Wi-Fi",starlink:"Starlink Internet",ac:"Air conditioning",private_bathroom:"Private bathroom",shower:"Walk-in shower",bathtub:"Bathtub",seaview:"Sea view",balcony:"Private balcony",sundeck:"Sundeck access",jacuzzi:"Jacuzzi",indoor_jacuzzi:"Indoor jacuzzi",outdoor_jacuzzi:"Outdoor jacuzzi",bar:"Mini bar",smart_tv:"Smart TV",king_bed:"King-size bed"};for(const[a,g]of Object.entries(p))if(r[a]&&n.push(g),n.length>=8)break;return n.length===0&&n.push("All cabins are non-smoking","Private bathroom","Air conditioning","Daily housekeeping","Private bathroom","Air conditioning"),n}function fs(s){if(!s)return"";try{const t=String(s),n=gs(t);return n?`https://lh3.googleusercontent.com/d/${n}=w1600`:t}catch{return s}}function gs(s){if(!s)return"";const t=String(s).match(/\/d\/([^/?#]+)/),n=String(s).match(/[?&]id=([^&]+)/);return t&&t[1]||n&&n[1]||""}function la(s){const t=[],n=String(s||""),r=gs(n);return n&&t.push(n),r&&(t.push(`https://lh3.googleusercontent.com/d/${r}=w1600`),t.push(`https://drive.google.com/uc?export=view&id=${r}`),t.push(`https://drive.google.com/uc?export=download&id=${r}`),t.push(`https://drive.google.com/thumbnail?id=${r}&sz=w1600`)),Array.from(new Set(t))}function hs(s,t){const n=s==null?void 0:s.target;if(!n)return;const r=parseInt(n.getAttribute("data-try")||"0",10),p=la(t);r<p.length-1?(n.setAttribute("data-try",String(r+1)),n.src=p[r+1]):n.src="/src/images/cabin.jpg"}function Vt(s){if(!s||typeof s=="string")return"";const t=[];s.image_main&&t.push(s.image_main),Array.isArray(s.images)&&t.push(...s.images);for(let r=1;r<=10;r++){const p=`image_${r}`;s[p]&&t.push(s[p])}const n=t.find(r=>!!r&&String(r).trim().length>0)||"";return n?fs(n):""}function ra(s){if(typeof s=="string"){const n=s.match(/\(([^)]+)\)$/);if(n&&n[1]){const r=(n[1].match(/\d+/g)||[]).map(p=>parseInt(p,10));if(r.length)return Math.max(...r)}return null}const t=(s.capacity||s.capacity_lock||"").toString();if(t){const n=(t.match(/\d+/g)||[]).map(r=>parseInt(r,10));if(n.length)return Math.max(...n)}return null}function Le(s){return s?String(s).replace(/\([^)]*\)/g," ").toLowerCase().replace(/[^a-z0-9]+/g," ").trim().replace(/\s+/g," "):""}function tt(s){if(!s)return"";let t=String(s);t=t.replace(/\([^)]*\)$/,"").trim();const n=t.split(/[-–—]/);return t=n[n.length-1],t.toLowerCase().replace(/[^a-z0-9]+/g," ").trim().replace(/\s+/g," ")}function ua(s,t){const n=Le(s);return t.some(r=>n.includes(r)||r.includes(n))}function ca(s){if(!s)return[];const t=[],n=s.match(/\(([^)]+)\)/g);n&&n.forEach(g=>t.push(g.replace(/[()]/g," "))),t.push(s);const p=t.join(" | ").split(/[+|,\/]/).map(g=>g.replace(/\b(pax|guests?)\b/gi,"").trim()).filter(Boolean).filter(g=>!/^\d+(\s*-\s*\d+)?$/.test(g)).map(g=>g.split(" ").map(C=>C?C[0].toUpperCase()+C.slice(1).toLowerCase():"").filter(Boolean).join(" ")),a=[];for(const g of p){const C=g.toLowerCase();a.some(I=>I.toLowerCase()===C)||a.push(g)}return a}function ys(s){if(!s)return null;const n=String(s).match(/\d+/g);if(!n||n.length===0)return null;const r=n.map(p=>parseInt(p,10));return Math.max(...r)}function Ht(s,t=nt){var I,O;if(s==null)return null;if(typeof s=="number"&&!Number.isNaN(s))return{amount:s,currency:t};const n=String(s).trim();if(!n)return null;const r=n.match(/([^\d]*)([\d.,\s]+)/);if(!r)return null;let p=((I=r[1])==null?void 0:I.replace(/from/gi,"").trim())||t,a=(O=r[2])==null?void 0:O.trim();if(!a)return null;a=a.replace(/[\s,]/g,""),(a.match(/\./g)||[]).length>1&&(a=a.replace(/\./g,""));const C=parseFloat(a);return Number.isNaN(C)?null:{amount:C,currency:p}}function Wt(s,t=nt){return Number.isFinite(s)?`${t||nt} ${Math.round(s).toLocaleString("en-US")}`:""}function da(s){if(!(s!=null&&s.price))return"";const t=Ht(s.price,nt);if(!t)return"";const n=Number((s==null?void 0:s.guests)||2),r=t.amount*(Number.isFinite(n)?n:2);return Wt(r,t.currency)}function va(s){K.value=s,Re.value=!0,jt()}function Yt(){Re.value=!1,K.value=null,Ve.value=1,Xt()}function pa(){Ae.value=!0,jt()}function ma(){Ae.value=!1,Xt()}function Mt(){Ie.value=!1,x.value=null,ve.value=2,Xt()}function fa(){const s=Gt.value;ve.value=Math.min(s,ve.value+1)}function ga(){ve.value=Math.max(1,ve.value-1)}function ha(){x.value&&(ks(x.value,ve.value),Mt())}function bs(s){return oe.value.some(t=>t.cabin===s.cabinName&&t.ship===s.shipName&&t.date===s.date)}function Jt(s){var t;bs(s)?ya(s):(x.value=s,ve.value=((t=z.value)==null?void 0:t.totalGuests)||2,Ie.value=!0,jt())}function ks(s,t=2){try{const n="komodo_itinerary",r=JSON.parse(localStorage.getItem(n)||"[]");if(r.some(g=>g.cabin===s.cabinName&&g.ship===s.shipName&&g.date===s.date))return;const a={operator:s.operatorLabel,ship:s.shipName,cabin:s.cabinName,date:s.date,price:s.price||null,capacity:s.capacityText||null,guests:t,qty:1,addedAt:Date.now()};r.push(a),localStorage.setItem(n,JSON.stringify(r)),Pt()}catch(n){console.error("Failed to add to itinerary",n)}}function ya(s){try{const t="komodo_itinerary",r=JSON.parse(localStorage.getItem(t)||"[]").filter(p=>!(p.cabin===s.cabinName&&p.ship===s.shipName&&p.date===s.date));localStorage.setItem(t,JSON.stringify(r)),Pt()}catch(t){console.error("Failed to remove from itinerary",t)}}function ba(){$.value=!0}function ka(){$.value=!1}function wa(){$.value=!1,ue.push("/results")}function Pt(){try{const t=JSON.parse(localStorage.getItem("komodo_itinerary")||"[]");oe.value=Array.isArray(t)?t:[]}catch{oe.value=[]}}function _a(s){try{const t="komodo_itinerary",n=JSON.parse(localStorage.getItem(t)||"[]");n.splice(s,1),localStorage.setItem(t,JSON.stringify(n)),Pt()}catch(t){console.error("Failed to remove item",t)}}const Pe={count:0,bodyOverflow:"",htmlOverflow:"",bodyPadding:"",htmlPadding:""};function jt(){const s=document.body,t=document.documentElement;if(!(!s||!t)){if(Pe.count===0){const n=window.innerWidth-t.clientWidth;if(Pe.bodyOverflow=s.style.overflow,Pe.htmlOverflow=t.style.overflow,Pe.bodyPadding=s.style.paddingRight,Pe.htmlPadding=t.style.paddingRight,n>0){const r=`${n}px`;s.style.paddingRight=r,t.style.paddingRight=r}s.style.overflow="hidden",t.style.overflow="hidden"}Pe.count++}}function Xt(){const s=document.body,t=document.documentElement;!s||!t||Pe.count!==0&&(Pe.count--,!(Pe.count>0)&&(s.style.overflow=Pe.bodyOverflow,t.style.overflow=Pe.htmlOverflow,s.style.paddingRight=Pe.bodyPadding,t.style.paddingRight=Pe.htmlPadding))}const F=m({title:"",firstName:"",lastName:"",phoneCountry:"+62",phoneNumber:"",country:"",email:"",confirmEmail:"",userType:"",notes:"",subscribeNews:!1,consentData:!1});async function $a(){if(!F.value.firstName||!F.value.lastName){alert("Please enter your first and last name");return}if(!F.value.email||F.value.email!==F.value.confirmEmail){alert("Please ensure email addresses match");return}if(!F.value.consentData){alert("Please consent to data collection to proceed");return}if(!oe.value.length){alert("Please add at least one cabin to your itinerary");return}let s=0;const t=[];for(const n of oe.value){const r=at(n.price),p=Number(n.guests||2),a=r*p;s+=a,t.push({name:`${n.ship} - ${n.cabin}`,quantity:p,price:r,category:"Cruise Cabin"})}s<=0&&(s=1e6,t.push({name:"Komodo Cruise Booking",quantity:1,price:s,category:"Cruise Booking"})),He.value=!0;try{const r=`Komodo Cruise Booking: ${oe.value.map(a=>`${a.ship} - ${a.cabin}`).join(", ")}`,p=await rl({amount:s,payerEmail:F.value.email,description:r,customerName:`${F.value.title?F.value.title+" ":""}${F.value.firstName} ${F.value.lastName}`,customerPhone:F.value.phoneCountry+F.value.phoneNumber,items:t});if(localStorage.setItem("komodo_last_enquiry",JSON.stringify({form:F.value,itinerary:oe.value,invoiceId:p.invoiceId,invoiceUrl:p.invoiceUrl,amount:s,createdAt:new Date().toISOString()})),p.invoiceUrl)ul(p.invoiceUrl);else throw new Error("No invoice URL received")}catch(n){console.error("Failed to create payment:",n),alert(`Failed to process payment: ${n.message}. Please try again.`)}finally{He.value=!1}}function ws(s,t){if(!s||!t)return s?[s]:[];const n=new Date(s),r=new Date(t),p=[];for(let a=new Date(n);a<=r;a.setDate(a.getDate()+1))p.push(Rt(a));return p}function Ca(s,t){const n=new Date(s);return n.setDate(n.getDate()+t),Rt(n)}function Rt(s){const t=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function Sa(){return Rt(new Date)}return Pt(),(s,t)=>{var n,r,p;return o(),i(G,null,[e("div",cl,[e("div",dl,[e("div",vl,[e("div",pl,[j.value?(o(),i("div",ml,[...t[41]||(t[41]=[e("p",{class:"loading-text"},"Loading",-1)])])):E.value?(o(),i("div",fl,[e("p",gl,c(E.value),1),e("button",{onClick:ea,class:"btn-primary"},"Try Again")])):(o(),i("div",hl,[t[53]||(t[53]=e("h2",{class:"results-title"},"Your Search Results",-1)),e("div",yl,[Tt.value.length?(o(),i("div",bl,[...t[42]||(t[42]=[e("p",null,[e("strong",null,"Your preferred travel dates are available!"),Y(" We have a team of Komodo Cruises Journey Designers who are ready to plan your trip. Simply select the results that suit your preferences best and submit your enquiry. ")],-1),e("p",{class:"results-note-muted"},[e("span",{class:"semibold"},"Note:"),Y(" These results indicate availability and do not guarantee a booking. ")],-1)])])):s.flexibleAlt?R("",!0):(o(),i("div",kl,[...t[43]||(t[43]=[e("p",null,[e("strong",null,"Your preferred dates are unfortunately not available, but there is availability at other Komodo Cruises lodges or on alternate dates.")],-1),e("p",null," We have a team of Komodo Cruises Journey Designers who are ready to plan your trip. Simply select the results that suit your preferences best and submit your enquiry. ",-1),e("p",{class:"results-note-muted"},[e("span",{class:"semibold"},"Note:"),Y(" These results indicate availability and do not guarantee a booking. ")],-1)])]))]),yt.value.length?(o(),i("div",wl,[e("div",_l,[e("div",{class:"sort-dropdown",ref_key:"sortDropdownRef",ref:Dt},[t[44]||(t[44]=e("span",{class:"sort-label"},"SORT BY",-1)),e("button",{type:"button",class:"sort-btn",onClick:t[0]||(t[0]=a=>_e.value=!_e.value),"aria-expanded":_e.value},[e("span",null,c(((n=Fe.find(a=>a.value===N.value))==null?void 0:n.label)||"Recommended"),1),e("img",{src:_e.value?Se(_t):Se(wt),alt:"",class:"sort-caret"},null,8,Cl)],8,$l),_e.value?(o(),i("div",{key:0,class:"sort-dropdown-panel",onClick:t[1]||(t[1]=re(()=>{},["stop"]))},[(o(),i(G,null,te(Fe,a=>e("button",{key:a.value,class:q(["sort-option",{active:N.value===a.value}]),onClick:g=>{N.value=a.value,_e.value=!1}},c(a.label),11,Sl)),64))])):R("",!0)],512)]),e("div",Dl,[e("span",xl,c(yt.value.length)+" "+c(yt.value.length===1?"Room":"Rooms"),1)])])):R("",!0),yt.value.length?(o(),i("div",Tl,[(o(!0),i(G,null,te(yt.value,a=>(o(),i("div",{class:"cabin-card",key:a.uniqueKey},[e("div",Nl,[de(dt,{name:a.isGallery&&u(a.id)==="left"?"slide-left":"slide-right",mode:"out-in"},{default:De(()=>[(o(),i("img",{src:a.isGallery?v(a.originalItem)[h(a.id)]||"/src/images/cabin.jpg":a.image||"/src/images/cabin.jpg",alt:a.title,referrerpolicy:"no-referrer",decoding:"async",loading:"lazy",onError:g=>hs(g,a.image),key:a.isGallery?h(a.id):0},null,40,Il))]),_:2},1032,["name"]),a.isGallery?(o(),i(G,{key:0},[e("button",{class:"gallery-nav gallery-prev",onClick:g=>H(a.id),"aria-label":"Previous image"}," ‹ ",8,Al),e("button",{class:"gallery-nav gallery-next",onClick:g=>w(a.id),"aria-label":"Next image"}," › ",8,Ml)],64)):R("",!0)]),e("div",Pl,[e("div",Rl,[e("div",El,[e("h3",Ol,c(a.title),1),e("span",Ll,c(qt(a.originalItem)),1)])]),e("div",Bl,[e("span",null,"Sleeps "+c(na(a.originalItem)||2),1),t[46]||(t[46]=e("span",{class:"specs-divider"},"|",-1)),e("span",null,c(ps(a.originalItem)||"1 King"),1),t[47]||(t[47]=e("span",{class:"specs-divider"},"|",-1)),e("span",null,c(ms(a.originalItem)||"Private cabin"),1),At(a.originalItem)?(o(),i(G,{key:0},[t[45]||(t[45]=e("span",{class:"specs-divider"},"|",-1)),e("span",null,c(At(a.originalItem))+" Days",1)],64)):R("",!0)]),e("div",zl,[e("ul",Fl,[(o(!0),i(G,null,te(ut(a.originalItem).slice(0,3),(g,C)=>(o(),i("li",{key:C},c(g),1))),128))]),ut(a.originalItem).length>3?(o(),i("ul",Ul,[(o(!0),i(G,null,te(ut(a.originalItem).slice(3,6),(g,C)=>(o(),i("li",{key:C+3},c(g),1))),128))])):R("",!0)]),e("button",{class:"cabin-details-btn",onClick:g=>a.availabilityType==="standard"&&va(a.originalItem)}," ROOM DETAILS ",8,Gl),a.trips&&a.trips.length>0?(o(),i("div",Kl,[e("div",ql,[e("div",Vl,[e("span",Hl,c(rs(rt(a).date,rt(a).tripDays)),1),e("span",Wl,c(rt(a).available||1)+" room"+c((rt(a).available||1)>1?"s":"")+" available",1)])]),a.trips.length>1?(o(),i("button",{key:0,class:"more-dates-toggle",onClick:re(g=>Ys(a.uniqueKey),["stop"])},[t[48]||(t[48]=e("span",null,"MORE DATES",-1)),e("span",{class:q(["toggle-arrow",{expanded:we.value[a.uniqueKey]}])},"▼",2)],8,Yl)):R("",!0),a.trips.length>1&&we.value[a.uniqueKey]?(o(),i("div",Jl,[(o(!0),i(G,null,te(Js(a),(g,C)=>(o(),i("div",{key:C,class:"trip-option-alt",onClick:I=>Ws(a,g)},[e("div",Xl,[e("span",Zl,c(rs(g.date,g.tripDays)),1),e("span",Ql,c(g.available||1)+" room"+c((g.available||1)>1?"s":"")+" available",1)]),t[49]||(t[49]=e("span",{class:"trip-select-action"},"Select",-1))],8,jl))),128))])):R("",!0)])):R("",!0),e("div",er,[e("div",tr,[(o(!0),i(G,null,te(a.prices,(g,C)=>(o(),i("div",{key:C,class:"price-display"},[e("p",sr,[t[50]||(t[50]=e("span",{class:"price-label"},"From",-1)),e("span",ar,"IDR "+c(g.value),1)]),t[51]||(t[51]=e("p",{class:"price-sub"},"per person, per night",-1))]))),128))]),e("div",nr,[e("button",{class:"btn-reserve-now",onClick:g=>js(a)}," RESERVE NOW ",8,or)])])])]))),128))])):s.flexibleAlt?(o(),i("div",ir,[t[52]||(t[52]=e("p",null,"No alternative options found for your criteria.",-1)),e("button",{onClick:Qs,class:"btn-primary"}," Search Again ")])):R("",!0)]))]),e("div",lr,[e("div",rr,[t[65]||(t[65]=e("h3",{class:"section-title-sidebar"},"Check Availability",-1)),j.value?(o(),i("div",ur,[...t[54]||(t[54]=[Oe('<div class="skeleton-group"><div class="skeleton-label"></div><div class="skeleton-input"></div></div><div class="skeleton-group"><div class="skeleton-label"></div><div class="skeleton-input"></div></div><div class="skeleton-group"><div class="skeleton-label"></div><div class="skeleton-input"></div></div><div class="skeleton-group"><div class="skeleton-label"></div><div class="skeleton-input"></div></div><div class="skeleton-toggle"><div class="skeleton-text-lg"></div><div class="skeleton-circle"></div></div><div class="skeleton-btn"></div>',6)])])):(o(),i(G,{key:1},[e("div",{class:"list dropdown",ref_key:"destDropdown",ref:pt},[t[56]||(t[56]=e("div",{class:"list-heading"},"Destinations",-1)),e("button",{type:"button",class:q(["select-summary",le.value||it.value?"is-filled":""]),onMouseenter:t[2]||(t[2]=a=>it.value=!0),onMouseleave:t[3]||(t[3]=a=>it.value=!1),onClick:t[4]||(t[4]=re(a=>xt("regions"),["stop"])),"aria-expanded":le.value?"true":"false"},[e("span",null,"Destinations: "+c(ge.value.length),1),e("span",dr,[e("img",{src:le.value?Se(_t):Se(wt),alt:"","aria-hidden":"true",class:"caret-icon"},null,8,vr)])],42,cr),le.value?(o(),i("div",{key:0,class:"dropdown-panel",onClick:t[8]||(t[8]=re(()=>{},["stop"]))},[e("div",{class:"dropdown-group-title"},c(ts)),(o(),i(G,null,te(Me,a=>e("div",{class:"list-row",key:a,onClick:g=>As(a)},[e("div",mr,c(a),1),me(e("input",{class:"check",type:"checkbox",value:a,"onUpdate:modelValue":t[5]||(t[5]=g=>ge.value=g),onClick:t[6]||(t[6]=re(()=>{},["stop"]))},null,8,fr),[[ct,ge.value]])],8,pr)),64)),e("div",{class:"dropdown-footer",onClick:t[7]||(t[7]=a=>zt("regions"))},[...t[55]||(t[55]=[e("span",null,"Next",-1),e("span",{style:{"font-size":"1.1rem"}},"›",-1)])])])):R("",!0)],512),e("div",{class:"list dropdown",ref_key:"shipsDropdown",ref:mt},[t[58]||(t[58]=e("div",{class:"list-heading"},"Ships",-1)),e("button",{type:"button",class:q(["select-summary",se.value||ot.value?"is-filled":""]),onMouseenter:t[9]||(t[9]=a=>ot.value=!0),onMouseleave:t[10]||(t[10]=a=>ot.value=!1),onClick:t[11]||(t[11]=re(a=>xt("ships"),["stop"])),"aria-expanded":se.value?"true":"false"},[e("span",null,"Ships: "+c(Ce.value.length),1),e("span",hr,[e("img",{src:se.value?Se(_t):Se(wt),alt:"","aria-hidden":"true",class:"caret-icon"},null,8,yr)])],42,gr),se.value?(o(),i("div",{key:0,class:"dropdown-panel",onClick:t[15]||(t[15]=re(()=>{},["stop"]))},[e("div",br,c(Fs.value),1),Ge.value?(o(),i("div",kr,"Loading ships...")):(o(),i(G,{key:1},[(o(!0),i(G,null,te($e.value,a=>(o(),i("div",{class:"list-row",key:a.id,onClick:g=>Ms(a.id)},[e("div",_r,c(a.label),1),me(e("input",{class:"check",type:"checkbox",value:a.id,"onUpdate:modelValue":t[12]||(t[12]=g=>Ce.value=g),onClick:t[13]||(t[13]=re(()=>{},["stop"]))},null,8,$r),[[ct,Ce.value]])],8,wr))),128)),$e.value.length===0?(o(),i("div",Cr," No ships found from API. ")):R("",!0)],64)),e("div",{class:"dropdown-footer",onClick:t[14]||(t[14]=a=>zt("ships"))},[...t[57]||(t[57]=[e("span",null,"Next",-1),e("span",{style:{"font-size":"1.1rem"}},"›",-1)])])])):R("",!0)],512),e("div",{class:"list dropdown",ref_key:"guestsDropdown",ref:ft},[t[62]||(t[62]=e("div",{class:"list-heading"},"Guests",-1)),e("button",{type:"button",class:q(["select-summary",ke.value||vt.value?"is-filled":""]),onMouseenter:t[16]||(t[16]=a=>vt.value=!0),onMouseleave:t[17]||(t[17]=a=>vt.value=!1),onClick:t[18]||(t[18]=re(a=>xt("guests"),["stop"])),"aria-expanded":ke.value?"true":"false"},[e("span",null,c(Q.value)+" Guests",1),e("span",Dr,[e("img",{src:ke.value?Se(_t):Se(wt),alt:"","aria-hidden":"true",class:"caret-icon"},null,8,xr)])],42,Sr),ke.value?(o(),i("div",{key:0,class:"dropdown-panel",onClick:t[20]||(t[20]=re(()=>{},["stop"]))},[t[61]||(t[61]=e("div",{class:"dropdown-group-title"},"Guests",-1)),e("div",Tr,[t[59]||(t[59]=e("div",{class:"simple-guests-label"},"Guests",-1)),e("div",Nr,[e("button",{type:"button",class:"btn-icon",onClick:Rs}," − "),e("span",Ir,c(Q.value),1),e("button",{type:"button",class:"btn-icon",onClick:Ps}," + ")])]),e("div",{class:"dropdown-footer",onClick:t[19]||(t[19]=a=>zt("guests"))},[...t[60]||(t[60]=[e("span",null,"Next",-1),e("span",{style:{"font-size":"1.1rem"}},"›",-1)])])])):R("",!0)],512),e("div",{class:"list dropdown",ref_key:"datesDropdown",ref:gt},[t[64]||(t[64]=e("div",{class:"list-heading"},"Dates",-1)),e("button",{type:"button",class:q(["select-summary",fe.value||Qe.value?"is-filled":""]),onMouseenter:t[21]||(t[21]=a=>Qe.value=!0),onMouseleave:t[22]||(t[22]=a=>Qe.value=!1),onClick:t[23]||(t[23]=re(a=>xt("dates"),["stop"])),"aria-expanded":fe.value?"true":"false"},[e("span",null,c(ie.value?`${ie.value} → ${Te.value||"..."}`:"Select dates"),1),e("span",Mr,[e("img",{src:fe.value?Se(_t):Se(wt),alt:"","aria-hidden":"true",class:"caret-icon"},null,8,Pr)])],42,Ar),fe.value?(o(),i("div",{key:0,class:"dropdown-panel date-dropdown-panel",onClick:t[24]||(t[24]=re(()=>{},["stop"]))},[e("div",Rr,[e("div",Er,[e("h4",Or,c(Es.value),1),e("div",{class:"calendar-nav-group"},[e("button",{class:"calendar-nav",onClick:Bs,type:"button"}," ‹ "),e("button",{class:"calendar-nav",onClick:Ls,type:"button"}," › ")])]),e("div",Lr,[t[63]||(t[63]=Oe('<div class="calendar-weekdays"><div class="weekday">Su</div><div class="weekday">Mo</div><div class="weekday">Tu</div><div class="weekday">We</div><div class="weekday">Th</div><div class="weekday">Fr</div><div class="weekday">Sa</div></div>',1)),e("div",Br,[(o(!0),i(G,null,te(Os.value,a=>(o(),i("button",{key:a.key,class:q(["calendar-day",{"other-month":!a.isCurrentMonth,selected:a.isSelected,disabled:!a.isSelectable,past:a.isPast,"in-range":a.isInRange,"range-start":a.isRangeStart,"range-end":a.isRangeEnd}]),disabled:!a.isSelectable,onClick:g=>zs(a),type:"button"},c(a.date),11,zr))),128))])])])])):R("",!0)],512),e("div",{class:"sidebar-actions"},[e("button",{class:"btn-primary",onClick:ta}," Apply ")])],64))]),j.value?R("",!0):(o(),i("div",Fr,[t[68]||(t[68]=e("h3",{class:"itinerary-title"},"Your Itinerary",-1)),t[69]||(t[69]=e("p",{class:"itinerary-description"}," This is a summary of the accommodation you have selected. After submitting your booking request, a Komodo Cruises Journey Designer will make contact to book and confirm your trip. ",-1)),t[70]||(t[70]=e("div",{class:"itinerary-divider"},null,-1)),oe.value.length===0?(o(),i("div",Ur," You haven't selected any options yet. ")):(o(),i("ul",Gr,[(o(!0),i(G,null,te(oe.value,(a,g)=>(o(),i("li",{key:a.addedAt,class:"itinerary-item"},[e("div",Kr,[e("h4",qr,c(a.ship),1),e("button",{class:"itinerary-remove-btn",onClick:C=>_a(g),"aria-label":"Remove item"},[...t[66]||(t[66]=[e("span",{class:"remove-icon"},"✕",-1)])],8,Vr)]),e("div",Hr,c(a.cabin),1),e("div",Wr,c(a.guests||2)+" Guest"+c((a.guests||2)>1?"s":""),1),e("div",Yr," from "+c(a.price||"ZAR 49 205")+" per adult, per night ",1),e("div",Jr,c(lt(a.date))+" → "+c(lt(us(a.date))),1)]))),128))])),Je.value.hasPrice?(o(),i("div",jr,[e("div",Xr,[t[67]||(t[67]=e("span",{class:"itinerary-total-label"},"Estimated total (per night, all guests)",-1)),e("span",Zr,c(Je.value.formattedTotal),1)]),e("p",Qr," Includes "+c(Je.value.pricedCount)+" of "+c(oe.value.length)+" selections. Final amounts are confirmed by our Journey Designers. ",1),Je.value.missingCount?(o(),i("p",eu,c(Je.value.missingCount)+" selection"+c(Je.value.missingCount>1?"s":"")+" doesn't have live pricing and is excluded from this estimate. ",1)):R("",!0)])):oe.value.length?(o(),i("p",tu," Pricing for the selected cabins will be confirmed by our Journey Designers. ")):R("",!0),oe.value.length?(o(),i("button",{key:4,class:"btn-send-enquiry",onClick:pa}," Send Availability Enquiry ")):R("",!0),t[71]||(t[71]=e("a",{href:"#",class:"link-speak-with-us"},"Speak with us ›",-1))]))])])]),Re.value&&K.value?(o(),i("div",{key:0,class:"modal-overlay",onClick:Yt},[e("div",{class:"modal-content modal-content-redesigned",onClick:t[27]||(t[27]=re(()=>{},["stop"]))},[e("button",{class:"modal-close-details",onClick:Yt},"✕"),e("div",su,[e("div",au,[e("div",nu,[e("h2",ou,c(qt(K.value)),1),t[72]||(t[72]=e("p",{class:"modal-cabin-subtitle"},"Room",-1))]),e("div",iu," Sleeps "+c(Ks.value||2)+" | "+c(ps(K.value))+" | "+c(ms(K.value)),1),e("blockquote",lu,' "'+c(Gs.value)+'" ',1),e("div",ru,[t[73]||(t[73]=e("h3",{class:"modal-section-title"},"OVERVIEW",-1)),e("div",uu,[e("ul",cu,[(o(!0),i(G,null,te(ut(K.value).slice(0,4),(a,g)=>(o(),i("li",{key:g},c(a),1))),128))]),ut(K.value).length>4?(o(),i("ul",du,[(o(!0),i(G,null,te(ut(K.value).slice(4,8),(a,g)=>(o(),i("li",{key:g+4},c(a),1))),128))])):R("",!0)])]),e("div",vu,[t[74]||(t[74]=e("h3",{class:"modal-section-title"},"AMENITIES & FEATURES",-1)),e("div",pu,[e("ul",mu,[(o(!0),i(G,null,te(Ut.value.slice(0,3),(a,g)=>(o(),i("li",{key:g},c(a),1))),128))]),Ut.value.length>3?(o(),i("ul",fu,[(o(!0),i(G,null,te(Ut.value.slice(3,6),(a,g)=>(o(),i("li",{key:g+3},c(a),1))),128))])):R("",!0)])])]),e("div",gu,[(o(),i("img",{src:M(),alt:K.value.cabinName,referrerpolicy:"no-referrer",class:"modal-cabin-image",key:A.value,onError:t[25]||(t[25]=a=>hs(a,K.value.image))},null,40,hu)),e("button",{class:"modal-gallery-nav modal-gallery-prev",onClick:J,"aria-label":"Previous"}," ‹ "),e("button",{class:"modal-gallery-nav modal-gallery-next",onClick:P,"aria-label":"Next"}," › "),e("div",yu,[Y(c(qt(K.value))+" ",1),e("span",bu,c(A.value+1)+" of "+c(B().length||1),1)])])]),e("div",ku,[e("div",wu,[e("div",_u,[e("span",$u,c(Ft.value||"Price on request"),1),Ft.value?(o(),i("span",Cu,"/Night")):R("",!0)]),t[75]||(t[75]=e("span",{class:"price-note"},"Excluding taxes and fees",-1))]),e("button",{class:"modal-book-btn",onClick:t[26]||(t[26]=a=>{Jt(K.value),Yt()})},c(bs(K.value)?"Remove from itinerary":"RESERVE NOW"),1)])])])):R("",!0),Ie.value?(o(),i("div",{key:1,class:"guest-modal-overlay",onClick:Mt},[e("div",{class:"guest-modal-content",onClick:t[28]||(t[28]=re(()=>{},["stop"]))},[e("button",{class:"guest-modal-close",onClick:Mt},"✕"),t[78]||(t[78]=e("div",{class:"guest-modal-header"},[e("h3",{class:"guest-modal-title"},"Number of Guests")],-1)),e("div",Su,[t[77]||(t[77]=e("p",{class:"guest-modal-description"}," Please indicate how many guests will be accommodated: ",-1)),e("div",Du,[e("div",xu,[t[76]||(t[76]=e("div",{class:"guest-counter-label"},"Number of Cabins",-1)),e("div",Tu,[e("button",{type:"button",class:"guest-counter-btn",onClick:ga,disabled:ve.value<=1}," − ",8,Nu),e("span",Iu,c(ve.value),1),e("button",{type:"button",class:"guest-counter-btn",onClick:fa,disabled:ve.value>=Gt.value}," + ",8,Au)])]),e("div",Mu,[Y(c(((r=x.value)==null?void 0:r.availableText)||"1 available")+" ",1),(p=x.value)!=null&&p.capacityText?(o(),i("span",Pu," • Max "+c(Gt.value)+" guests",1)):R("",!0)])]),e("div",{class:"guest-modal-actions"},[e("button",{class:"btn-cancel-guest",onClick:Mt}," Cancel "),e("button",{class:"btn-submit-guest",onClick:ha}," Add to Itinerary ")])])])])):R("",!0),Ae.value?(o(),i("div",Ru,[e("div",Eu,[e("div",{class:"enquiry-modal-header"},[t[79]||(t[79]=e("h2",{class:"enquiry-modal-title"},"Plan your Trip",-1)),e("button",{class:"enquiry-modal-close",onClick:ma}," Close ✕ ")]),e("div",Ou,[e("div",Lu,[t[97]||(t[97]=e("p",{class:"enquiry-intro"}," Please complete the form below and one of our Journey Designers will contact you shortly to plan your trip. ",-1)),e("form",{class:"enquiry-form",onSubmit:re($a,["prevent"])},[e("div",Bu,[e("div",zu,[t[81]||(t[81]=e("label",{class:"form-label"},"Title",-1)),me(e("select",{class:"form-control","onUpdate:modelValue":t[29]||(t[29]=a=>F.value.title=a)},[...t[80]||(t[80]=[Oe('<option value="">Select</option><option value="Mr">Mr</option><option value="Mrs">Mrs</option><option value="Ms">Ms</option><option value="Dr">Dr</option>',5)])],512),[[Et,F.value.title]])]),e("div",Fu,[t[82]||(t[82]=e("label",{class:"form-label"},"First Name",-1)),me(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[30]||(t[30]=a=>F.value.firstName=a),required:""},null,512),[[je,F.value.firstName]])]),e("div",Uu,[t[83]||(t[83]=e("label",{class:"form-label"},"Last Name",-1)),me(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[31]||(t[31]=a=>F.value.lastName=a),required:""},null,512),[[je,F.value.lastName]])])]),e("div",Gu,[e("div",Ku,[t[85]||(t[85]=e("label",{class:"form-label"},"Contact Number",-1)),e("div",qu,[me(e("select",{class:"phone-country","onUpdate:modelValue":t[32]||(t[32]=a=>F.value.phoneCountry=a)},[...t[84]||(t[84]=[Oe('<option value="+62">🇮🇩 +62</option><option value="+1">🇺🇸 +1</option><option value="+44">🇬🇧 +44</option><option value="+61">🇦🇺 +61</option><option value="+65">🇸🇬 +65</option><option value="+60">🇲🇾 +60</option>',6)])],512),[[Et,F.value.phoneCountry]]),me(e("input",{type:"tel",class:"form-control","onUpdate:modelValue":t[33]||(t[33]=a=>F.value.phoneNumber=a),placeholder:"812345678"},null,512),[[je,F.value.phoneNumber]])])]),e("div",Vu,[t[87]||(t[87]=e("label",{class:"form-label"},"Country",-1)),me(e("select",{class:"form-control","onUpdate:modelValue":t[34]||(t[34]=a=>F.value.country=a)},[...t[86]||(t[86]=[Oe('<option value="">Select Country</option><option value="Indonesia">Indonesia</option><option value="United States">United States</option><option value="United Kingdom">United Kingdom</option><option value="Australia">Australia</option><option value="Singapore">Singapore</option><option value="Malaysia">Malaysia</option>',7)])],512),[[Et,F.value.country]])])]),e("div",Hu,[e("div",Wu,[t[88]||(t[88]=e("label",{class:"form-label"},"Email",-1)),me(e("input",{type:"email",class:"form-control","onUpdate:modelValue":t[35]||(t[35]=a=>F.value.email=a),required:""},null,512),[[je,F.value.email]])]),e("div",Yu,[t[89]||(t[89]=e("label",{class:"form-label"},"Confirm Email Address",-1)),me(e("input",{type:"email",class:"form-control","onUpdate:modelValue":t[36]||(t[36]=a=>F.value.confirmEmail=a),required:""},null,512),[[je,F.value.confirmEmail]])])]),e("div",Ju,[t[91]||(t[91]=e("label",{class:"form-label"},"I am a:",-1)),me(e("select",{class:"form-control","onUpdate:modelValue":t[37]||(t[37]=a=>F.value.userType=a)},[...t[90]||(t[90]=[e("option",{value:""},"Select",-1),e("option",{value:"guest"},"Guest",-1),e("option",{value:"agent"},"Travel Agent",-1)])],512),[[Et,F.value.userType]])]),e("div",ju,[t[92]||(t[92]=e("label",{class:"form-label"},"Is there anything else you'd like to let us know?",-1)),me(e("textarea",{class:"form-control form-textarea",rows:"4","onUpdate:modelValue":t[38]||(t[38]=a=>F.value.notes=a)},null,512),[[je,F.value.notes]])]),e("div",Xu,[e("label",Zu,[me(e("input",{type:"checkbox","onUpdate:modelValue":t[39]||(t[39]=a=>F.value.subscribeNews=a)},null,512),[[ct,F.value.subscribeNews]]),t[93]||(t[93]=e("span",null,"Sign up to receive news and blog posts from Komodo Cruises",-1))]),e("label",Qu,[me(e("input",{type:"checkbox","onUpdate:modelValue":t[40]||(t[40]=a=>F.value.consentData=a),required:""},null,512),[[ct,F.value.consentData]]),t[94]||(t[94]=e("span",null,"I consent to my submitted data being collected and stored",-1))])]),t[95]||(t[95]=e("p",{class:"form-note"},[e("strong",null,"PLEASE NOTE:"),Y(" These results indicate availability and do not guarantee a booking. One of our Journey Designers will contact you shortly to plan your trip. ")],-1)),e("button",{type:"submit",class:"btn-submit-enquiry",disabled:He.value},c(He.value?"PROCESSING...":"PROCEED TO PAYMENT"),9,ec),t[96]||(t[96]=e("p",{class:"form-recaptcha"}," This form is protected by reCAPTCHA Enterprise and the Google Privacy Policy and Terms of Service apply. ",-1))],32)]),e("div",tc,[t[101]||(t[101]=e("h3",{class:"summary-title"},"Your Itinerary",-1)),t[102]||(t[102]=e("p",{class:"summary-description"}," This is a summary of the accommodation you've selected. One of our Komodo Cruises Journey Designers will contact you shortly to plan your trip. ",-1)),e("div",sc,[(o(!0),i(G,null,te(oe.value,(a,g)=>(o(),i("div",{key:g,class:"summary-item"},[e("div",ac,[e("h4",nc,c(a.ship),1)]),e("div",oc,[e("p",ic,c(a.cabin),1),e("p",lc,c(a.guests||2)+" Guest"+c((a.guests||2)>1?"s":""),1),e("p",rc,c(lt(a.date))+" → "+c(lt(us(a.date))),1)]),a.price?(o(),i("div",uc,[e("div",cc,[t[98]||(t[98]=e("span",{class:"pricing-label"},"Price per cabin",-1)),e("span",dc,c(a.price),1)]),e("div",vc,[e("span",pc,"× "+c(a.guests||2)+" guest"+c((a.guests||2)>1?"s":""),1),e("span",mc,c(da(a)),1)])])):R("",!0)]))),128))]),Je.value.hasPrice?(o(),i("div",fc,[t[100]||(t[100]=e("div",{class:"enquiry-total-divider"},null,-1)),e("div",gc,[e("div",hc,[t[99]||(t[99]=e("span",{class:"enquiry-total-label"},"Total Price",-1)),e("span",yc,c(Je.value.formattedTotal),1)])])])):oe.value.length?(o(),i("p",bc," Pricing for the selected cabins will be confirmed by our Journey Designers. ")):R("",!0)])])])])):R("",!0),e("footer",kc,[e("div",wc,[e("div",_c,[t[106]||(t[106]=e("div",{class:"hf-brand"},[e("div",{class:"hf-logo"},"KOMODO CRUISES"),e("div",{class:"hf-copy"},"Rare journeys across the Komodo Islands.")],-1)),e("nav",$c,[e("a",{href:"#",onClick:re(ba,["prevent"])},"Plan your trip"),t[103]||(t[103]=e("a",{href:"#"},"Experiences",-1)),t[104]||(t[104]=e("a",{href:"#"},"Our story",-1)),t[105]||(t[105]=e("a",{href:"#"},"Contact",-1))]),t[107]||(t[107]=Oe('<div class="hf-contact"><div class="hf-contact-title">Contact Us</div><div class="hf-contact-phone"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg><a href="tel:+6285282296450">+62 852-8229-6450</a></div><div class="hf-contact-address"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg><span>Graha Permata Pancoran, Jl. KH. Guru Amin Blok A5, Pancoran, Jakarta Selatan 12780</span></div></div>',1))]),e("div",Cc,[e("div",Sc," © "+c(new Date().getFullYear())+" Komodo Cruises | PT CANARD MONEY INDONESIA ",1),t[108]||(t[108]=e("div",{class:"hf-disclaimer"}," All voyages subject to weather and park regulations. ",-1))])])])]),de(os,{isOpen:$.value,onClose:ka,onNavigateToResults:wa},null,8,["isOpen"])],64)}}},xc={class:"plan-wrap plan-page"},Tc={class:"plan-content"},Nc={class:"steps",role:"tablist","aria-label":"Plan steps"},Ic=["disabled"],Ac=["disabled"],Mc=["disabled"],Pc=["disabled"],Rc={key:0},Ec={class:"list"},Oc={class:"list-text"},Lc=["value","aria-label"],Bc={key:1},zc={class:"list"},Fc={class:"list-text"},Uc=["value","aria-label"],Gc={key:2},Kc={class:"date-range-display"},qc={class:"date-value"},Vc={class:"date-value"},Hc={class:"custom-calendar"},Wc={class:"calendar-header"},Yc={class:"calendar-title"},Jc={class:"calendar-grid"},jc={class:"calendar-days"},Xc=["disabled","onClick"],Zc={key:3},Qc={class:"counters"},ed={class:"counter-row"},td={class:"counter-ctrls"},sd={class:"count"},ad={class:"counter-row"},nd={class:"counter-ctrls"},od={class:"count"},id={class:"counter-row"},ld={class:"counter-ctrls"},rd={class:"count"},ud={class:"counter-row"},cd={class:"counter-ctrls"},dd={class:"count"},vd={key:4},pd={class:"mt-4"},md={class:"mt-4"},fd={class:"mt-4",style:{"text-align":"right"}},gd={class:"bottom-bar"},hd={class:"nav-inner",style:{display:"flex","align-items":"center","justify-content":"space-between"}},yd={key:1},bd="Nusa Tenggara Timur",kd={__name:"Plan",setup(k){const f=m(1),d=["Pulau Komodo","Labuan Bajo"],b=[],v=m(""),h=m(""),u=m(""),T=m(""),H=m(2),w=m(0),A=m(0),B=m(0),M=m(new Date().getMonth()),J=m(new Date().getFullYear()),P=["Destinations","Ships","Dates","Guests","Submit"],ue=D(()=>P[f.value-2]||""),j=D(()=>f.value<5?P[f.value-1]+" ›":"Submit ›");D(()=>new Date().toISOString().split("T")[0]);const E=D(()=>`${["January","February","March","April","May","June","July","August","September","October","November","December"][M.value]} ${J.value}`),$=D(()=>{const V=new Date(J.value,M.value,1),y=new Date(J.value,M.value+1,0),we=new Date(V),N=new Date;we.setDate(we.getDate()-we.getDay());const _e=[],Fe=new Date(y);Fe.setDate(Fe.getDate()+(6-y.getDay()));for(let Me=new Date(we);Me<=Fe;Me.setDate(Me.getDate()+1)){Me.getDay();const Ze=Me.getMonth()===M.value,$e=new Date(Me);$e.setHours(0,0,0,0);const Ge=new Date(N);Ge.setHours(0,0,0,0);const ge=$e<Ge,Ce=Ze&&!ge,Ee=Me.toISOString().split("T")[0];let ie=!1,Te=!1,We=!1;if(u.value&&T.value&&Ze){const S=new Date(u.value+"T00:00:00"),l=new Date(T.value+"T00:00:00");$e>=S&&$e<=l&&(ie=!0,$e.getTime()===S.getTime()&&(Te=!0),$e.getTime()===l.getTime()&&(We=!0))}_e.push({key:Me.getTime(),date:Me.getDate(),fullDate:Ee,isCurrentMonth:Ze,isSelectable:Ce,isPast:ge,isSelected:u.value===Ee||T.value===Ee,isInRange:ie,isRangeStart:Te,isRangeEnd:We})}return _e}),z=D(()=>!!v.value),ae=D(()=>!!v.value&&!!h.value),ne=D(()=>!!v.value&&!!h.value&&!!u.value);$t(v,()=>{h.value=""});function xe(V){f.value=V}function oe(){if(f.value===1&&!v.value)return K("Please select a destination first.");if(f.value===2&&!h.value)return K("Please select a ship first.");if(f.value===3&&!u.value)return K("Please select a start date first.");f.value<5?f.value++:Re()}function x(){f.value>1&&f.value--}function Re(){const V={region:bd,destination:v.value,ship:h.value,lodges:h.value?[h.value]:[],dateFrom:u.value,dateTo:T.value,adults:H.value,children:w.value,age3_9:A.value,age0_2:B.value,totalGuests:H.value+w.value+A.value+B.value,timestamp:Date.now()};localStorage.setItem("komodo_search_criteria",JSON.stringify(V)),window.location.href="/results"}function Ie(V){V==="adults"?H.value++:V==="children"?w.value++:V==="age3_9"?A.value++:V==="age0_2"&&B.value++}function Ae(V){V==="adults"&&H.value>0?H.value--:V==="children"&&w.value>0?w.value--:V==="age3_9"&&A.value>0?A.value--:V==="age0_2"&&B.value>0&&B.value--}function K(V){alert(V)}function Ve(){M.value===0?(M.value=11,J.value--):M.value--}function ve(){M.value===11?(M.value=0,J.value++):M.value++}function He(V){if(V.isSelectable)if(!u.value||u.value&&T.value)u.value=V.fullDate,T.value="";else{const y=new Date(u.value+"T00:00:00");new Date(V.fullDate+"T00:00:00")<y?(T.value=u.value,u.value=V.fullDate):T.value=V.fullDate}}return(V,y)=>{const we=Ct("router-link");return o(),i("section",xc,[e("div",Tc,[e("div",Nc,[e("button",{class:q(["step",{"step-active":f.value===1}]),onClick:y[0]||(y[0]=N=>xe(1))}," Step 1 ",2),e("button",{class:q(["step",{"step-active":f.value===2}]),onClick:y[1]||(y[1]=N=>xe(2)),disabled:!z.value}," Step 2 ",10,Ic),e("button",{class:q(["step",{"step-active":f.value===3}]),onClick:y[2]||(y[2]=N=>xe(3)),disabled:!ae.value}," Step 3 ",10,Ac),e("button",{class:q(["step",{"step-active":f.value===4}]),onClick:y[3]||(y[3]=N=>xe(4)),disabled:!ne.value}," Step 4 ",10,Mc),e("button",{class:q(["step",{"step-active":f.value===5}]),onClick:y[4]||(y[4]=N=>xe(5)),disabled:!ne.value}," Step 5 ",10,Pc)]),f.value===1?(o(),i("div",Rc,[y[16]||(y[16]=e("h3",{class:"step-title"},"Destinations",-1)),y[17]||(y[17]=e("p",{class:"results-note"},[Y(" Region: "),e("span",{class:"semibold"},"Nusa Tenggara Timur")],-1)),y[18]||(y[18]=e("p",{class:"results-note"},"Select a destination you're interested in:",-1)),e("div",Ec,[y[15]||(y[15]=e("div",{class:"list-heading"},"Nusa Tenggara Timur",-1)),(o(),i(G,null,te(d,N=>e("div",{class:"list-row",key:N},[e("div",Oc,c(N),1),me(e("input",{class:"radio",type:"radio",name:"destination",value:N,"onUpdate:modelValue":y[5]||(y[5]=_e=>v.value=_e),"aria-label":`Destination ${N}`},null,8,Lc),[[Ss,v.value]])])),64))])])):f.value===2?(o(),i("div",Bc,[y[20]||(y[20]=e("h3",{class:"step-title"},"Ships",-1)),y[21]||(y[21]=e("p",{class:"results-note"},"Please select a ship:",-1)),e("div",zc,[y[19]||(y[19]=e("div",{class:"list-heading"},"Available Ships",-1)),(o(),i(G,null,te(b,N=>e("div",{class:"list-row",key:N},[e("div",Fc,c(N),1),me(e("input",{class:"radio",type:"radio",name:"ship",value:N,"onUpdate:modelValue":y[6]||(y[6]=_e=>h.value=_e),"aria-label":`Ship ${N}`},null,8,Uc),[[Ss,h.value]])])),64))])])):f.value===3?(o(),i("div",Gc,[y[24]||(y[24]=e("h3",{class:"step-title"},"Dates",-1)),y[25]||(y[25]=e("p",{class:"results-note"},"Select your travel dates:",-1)),y[26]||(y[26]=e("p",{class:"results-note text-sm"}," Click to select start date, then click again to select end date. ",-1)),e("div",Kc,[e("span",qc,c(u.value||"Start date"),1),y[22]||(y[22]=e("span",{class:"date-arrow"},"→",-1)),e("span",Vc,c(T.value||"End date"),1)]),e("div",Hc,[e("div",Wc,[e("button",{class:"calendar-nav",onClick:Ve,type:"button"}," ‹ "),e("h4",Yc,c(E.value),1),e("button",{class:"calendar-nav",onClick:ve,type:"button"}," › ")]),e("div",Jc,[y[23]||(y[23]=Oe('<div class="calendar-weekdays"><div class="weekday">Su</div><div class="weekday">Mo</div><div class="weekday">Tu</div><div class="weekday">We</div><div class="weekday">Th</div><div class="weekday">Fr</div><div class="weekday">Sa</div></div>',1)),e("div",jc,[(o(!0),i(G,null,te($.value,N=>(o(),i("button",{key:N.key,class:q(["calendar-day",{"other-month":!N.isCurrentMonth,selected:N.isSelected,disabled:!N.isSelectable,past:N.isPast,"in-range":N.isInRange,"range-start":N.isRangeStart,"range-end":N.isRangeEnd}]),disabled:!N.isSelectable,onClick:_e=>He(N),type:"button"},c(N.date),11,Xc))),128))])])])])):f.value===4?(o(),i("div",Zc,[y[31]||(y[31]=e("h3",{class:"step-title"},"Guests",-1)),y[32]||(y[32]=e("p",{class:"results-note"}," Please indicate how many adults will need to be accommodated. ",-1)),y[33]||(y[33]=e("p",{class:"results-note"}," If your booking includes children, please enquire directly on the next step. ",-1)),y[34]||(y[34]=e("p",{class:"results-note"},"View our child policy for each lodge here.",-1)),e("div",Qc,[e("div",ed,[y[27]||(y[27]=e("div",{class:"counter-text"},[e("div",{class:"semibold"},"Adults"),e("div",{class:"muted text-sm"},"Ages 17+")],-1)),e("div",td,[e("button",{type:"button",class:"btn-icon",onClick:y[7]||(y[7]=N=>Ae("adults"))}," − "),e("span",sd,c(H.value),1),e("button",{type:"button",class:"btn-icon",onClick:y[8]||(y[8]=N=>Ie("adults"))}," + ")])]),e("div",ad,[y[28]||(y[28]=e("div",{class:"counter-text"},[e("div",{class:"semibold"},"Children"),e("div",{class:"muted text-sm"},"Ages 10 - 16")],-1)),e("div",nd,[e("button",{type:"button",class:"btn-icon",onClick:y[9]||(y[9]=N=>Ae("children"))}," − "),e("span",od,c(w.value),1),e("button",{type:"button",class:"btn-icon",onClick:y[10]||(y[10]=N=>Ie("children"))}," + ")])]),e("div",id,[y[29]||(y[29]=e("div",{class:"counter-text"},[e("div",{class:"semibold"},"Ages 3 - 9")],-1)),e("div",ld,[e("button",{type:"button",class:"btn-icon",onClick:y[11]||(y[11]=N=>Ae("age3_9"))}," − "),e("span",rd,c(A.value),1),e("button",{type:"button",class:"btn-icon",onClick:y[12]||(y[12]=N=>Ie("age3_9"))}," + ")])]),e("div",ud,[y[30]||(y[30]=e("div",{class:"counter-text"},[e("div",{class:"semibold"},"Ages 0 - 2")],-1)),e("div",cd,[e("button",{type:"button",class:"btn-icon",onClick:y[13]||(y[13]=N=>Ae("age0_2"))}," − "),e("span",dd,c(B.value),1),e("button",{type:"button",class:"btn-icon",onClick:y[14]||(y[14]=N=>Ie("age0_2"))}," + ")])])])])):(o(),i("div",vd,[y[38]||(y[38]=e("h3",{class:"step-title"},"Check Availability",-1)),y[39]||(y[39]=e("p",{class:"results-note"}," To see if we have availability for your preferred criteria, please click the button below. ",-1)),e("div",pd,[de(we,{class:"btn-primary",to:"/results"},{default:De(()=>[...y[35]||(y[35]=[Y("Check now",-1)])]),_:1})]),y[40]||(y[40]=e("div",{class:"section-divider",style:{margin:"1.5rem 0"}},null,-1)),y[41]||(y[41]=e("h4",{class:"section-title"}," Speak with a Komodo Cruises Travel Advisor ",-1)),y[42]||(y[42]=e("p",{class:"results-note"}," Need some help to plan your trip? Enquire below to contact one of our Komodo Cruises Travel Advisors. ",-1)),e("div",md,[de(we,{class:"btn-primary",to:"/results"},{default:De(()=>[...y[36]||(y[36]=[Y("Enquire now",-1)])]),_:1})]),e("div",fd,[de(we,{to:"/",class:"nav-link"},{default:De(()=>[...y[37]||(y[37]=[Y("Back to Search",-1)])]),_:1})])])),e("div",gd,[e("div",hd,[f.value>1?(o(),i("button",{key:0,class:"link-muted",onClick:x}," ‹ "+c(ue.value),1)):(o(),i("span",yd)),e("button",{class:"btn-primary",onClick:oe},c(j.value),1)])])])])}}},wd={class:"payment-success-page"},_d={class:"success-container"},$d={class:"success-content"},Cd={class:"booking-card"},Sd={class:"booking-header"},Dd={class:"booking-id"},xd={class:"value"},Td={class:"booking-details"},Nd={class:"detail-section"},Id={class:"detail-grid"},Ad={class:"detail-item"},Md={class:"value"},Pd={class:"detail-item"},Rd={class:"value"},Ed={class:"detail-item"},Od={class:"value"},Ld={class:"detail-section"},Bd={class:"detail-grid"},zd={class:"detail-item"},Fd={class:"value"},Ud={class:"detail-item"},Gd={class:"value"},Kd={class:"detail-item"},qd={class:"value"},Vd={class:"detail-item"},Hd={class:"value"},Wd={class:"detail-item"},Yd={class:"value"},Jd={class:"detail-section payment-section"},jd={class:"payment-breakdown"},Xd={class:"payment-row"},Zd={class:"payment-row total"},Qd={class:"total-amount"},ev={class:"email-notice"},tv={class:"email-content"},sv={key:0},av={key:1},nv={key:2},ov={class:"action-buttons"},iv={__name:"PaymentSuccess",setup(k){const f=m("sending"),d=La({bookingId:"KC2025001",customerName:"Guest",email:"guest@email.com",phone:"-",shipName:"Komodo Cruise",cabinName:"-",itinerary:"-",travelDate:"To be confirmed",guests:2,pricePerCabin:0,totalAmount:0}),b=h=>h?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(h):"Rp 0",v=async()=>{try{f.value="sending",(await(await fetch("https://komodo-cruises-production-0c52.up.railway.app/api/send-confirmation-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerName:d.customerName,customerEmail:d.email,customerPhone:d.phone,bookingId:d.bookingId,shipName:d.shipName,cabinName:d.cabinName,itinerary:d.itinerary,travelDate:d.travelDate,guests:d.guests,pricePerCabin:d.pricePerCabin,totalAmount:d.totalAmount})})).json()).success?f.value="sent":f.value="failed"}catch(h){console.error("Failed to send email:",h),f.value="failed"}};return ze(async()=>{try{const h=localStorage.getItem("komodo_last_enquiry");if(h){const u=JSON.parse(h);if(u.form&&(d.customerName=`${u.form.title||""} ${u.form.firstName||""} ${u.form.lastName||""}`.trim()||"Guest",d.email=u.form.email||"guest@email.com",d.phone=u.form.phone||"-"),u.itinerary&&u.itinerary.length>0){const T=u.itinerary[0];d.shipName=T.ship||"Komodo Cruise",d.cabinName=T.cabin||"-",d.itinerary=T.itinerary||"-",d.travelDate=T.date||"To be confirmed",d.guests=T.guests||2,d.pricePerCabin=T.pricePerCabin||0}d.totalAmount=u.amount||0,d.bookingId=u.invoiceId?`KC${Date.now().toString().slice(-8)}`:"KC2025001"}localStorage.removeItem("komodo_itinerary"),d.email&&d.email!=="guest@email.com"?await v():f.value="sent"}catch(h){console.error("Error loading booking data:",h),f.value="failed"}}),(h,u)=>{const T=Ct("router-link");return o(),i("div",wd,[e("div",_d,[u[26]||(u[26]=Oe('<div class="success-animation" data-v-398585a2><div class="checkmark-circle" data-v-398585a2><svg class="checkmark" viewBox="0 0 52 52" data-v-398585a2><circle class="checkmark-circle-bg" cx="26" cy="26" r="25" fill="none" data-v-398585a2></circle><path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" data-v-398585a2></path></svg></div></div>',1)),e("div",$d,[u[22]||(u[22]=e("h1",{class:"success-title"},"Thank You for Your Purchase!",-1)),u[23]||(u[23]=e("p",{class:"success-subtitle"},"Your payment has been successfully processed",-1)),e("div",Cd,[e("div",Sd,[u[1]||(u[1]=e("div",{class:"booking-badge"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e("polyline",{points:"22 4 12 14.01 9 11.01"})]),e("span",null,"Booking Confirmed")],-1)),e("div",Dd,[u[0]||(u[0]=e("span",{class:"label"},"Booking ID",-1)),e("span",xd,"#"+c(d.bookingId),1)])]),e("div",Td,[e("div",Nd,[u[5]||(u[5]=e("h3",{class:"section-title"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})]),Y(" Guest Information ")],-1)),e("div",Id,[e("div",Ad,[u[2]||(u[2]=e("span",{class:"label"},"Name",-1)),e("span",Md,c(d.customerName),1)]),e("div",Pd,[u[3]||(u[3]=e("span",{class:"label"},"Email",-1)),e("span",Rd,c(d.email),1)]),e("div",Ed,[u[4]||(u[4]=e("span",{class:"label"},"Phone",-1)),e("span",Od,c(d.phone),1)])])]),e("div",Ld,[u[11]||(u[11]=e("h3",{class:"section-title"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"})]),Y(" Trip Details ")],-1)),e("div",Bd,[e("div",zd,[u[6]||(u[6]=e("span",{class:"label"},"Ship",-1)),e("span",Fd,c(d.shipName),1)]),e("div",Ud,[u[7]||(u[7]=e("span",{class:"label"},"Cabin Type",-1)),e("span",Gd,c(d.cabinName),1)]),e("div",Kd,[u[8]||(u[8]=e("span",{class:"label"},"Itinerary",-1)),e("span",qd,c(d.itinerary),1)]),e("div",Vd,[u[9]||(u[9]=e("span",{class:"label"},"Travel Date",-1)),e("span",Hd,c(d.travelDate),1)]),e("div",Wd,[u[10]||(u[10]=e("span",{class:"label"},"Guests",-1)),e("span",Yd,c(d.guests)+" Person(s)",1)])])]),e("div",Jd,[u[14]||(u[14]=e("h3",{class:"section-title"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]),Y(" Payment Summary ")],-1)),e("div",jd,[e("div",Xd,[e("span",null,c(d.cabinName)+" × "+c(d.guests),1),e("span",null,c(b(d.pricePerCabin))+" × "+c(d.guests),1)]),u[13]||(u[13]=e("div",{class:"payment-divider"},null,-1)),e("div",Zd,[u[12]||(u[12]=e("span",null,"Total Paid",-1)),e("span",Qd,c(b(d.totalAmount)),1)])]),u[15]||(u[15]=e("div",{class:"payment-status"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e("polyline",{points:"22 4 12 14.01 9 11.01"})]),e("span",null,"Payment Successful")],-1))])])]),e("div",ev,[u[19]||(u[19]=e("div",{class:"email-icon"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})])],-1)),e("div",tv,[u[17]||(u[17]=e("h4",null,"Check Your Email",-1)),e("p",null,[u[16]||(u[16]=Y("A detailed receipt and booking confirmation has been sent to ",-1)),e("strong",null,c(d.email),1)]),u[18]||(u[18]=e("p",{class:"email-hint"},"Don't forget to check your spam folder if you don't see it within a few minutes.",-1))]),e("div",{class:q(["email-status",f.value])},[f.value==="sending"?(o(),i("span",sv,"Sending...")):f.value==="sent"?(o(),i("span",av,"✓ Email Sent")):f.value==="failed"?(o(),i("span",nv,"⚠ Will retry")):R("",!0)],2)]),u[24]||(u[24]=Oe('<div class="whats-next" data-v-398585a2><h3 data-v-398585a2>What Happens Next?</h3><div class="next-steps" data-v-398585a2><div class="step" data-v-398585a2><div class="step-number" data-v-398585a2>1</div><div class="step-content" data-v-398585a2><strong data-v-398585a2>Email Confirmation</strong><p data-v-398585a2>Check your inbox for your booking receipt and trip details</p></div></div><div class="step" data-v-398585a2><div class="step-number" data-v-398585a2>2</div><div class="step-content" data-v-398585a2><strong data-v-398585a2>Journey Designer Contact</strong><p data-v-398585a2>Our team will reach out within 24 hours to finalize your itinerary</p></div></div><div class="step" data-v-398585a2><div class="step-number" data-v-398585a2>3</div><div class="step-content" data-v-398585a2><strong data-v-398585a2>Prepare for Adventure</strong><p data-v-398585a2>Get your travel documents ready and pack for an unforgettable trip!</p></div></div></div></div>',1)),e("div",ov,[de(T,{to:"/",class:"btn-primary"},{default:De(()=>[...u[20]||(u[20]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),Y(" Back to Home ",-1)])]),_:1}),de(T,{to:"/plan",class:"btn-secondary"},{default:De(()=>[...u[21]||(u[21]=[Y(" Explore More Trips ",-1)])]),_:1})]),u[25]||(u[25]=e("div",{class:"support-info"},[e("p",null,"Need help? Contact our support team at"),e("a",{href:"mailto:support@komodocruises.com"},"support@komodocruises.com")],-1))])])])}}},lv=qe(iv,[["__scopeId","data-v-398585a2"]]),rv={},uv={class:"payment-result-page"},cv={class:"payment-result-container"},dv={class:"result-actions"};function vv(k,f){const d=Ct("router-link");return o(),i("div",uv,[e("div",cv,[f[2]||(f[2]=Oe('<div class="result-icon failed" data-v-690b1a80><svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-690b1a80><circle cx="12" cy="12" r="10" data-v-690b1a80></circle><line x1="15" y1="9" x2="9" y2="15" data-v-690b1a80></line><line x1="9" y1="9" x2="15" y2="15" data-v-690b1a80></line></svg></div><h1 class="result-title" data-v-690b1a80>Payment Failed</h1><p class="result-message" data-v-690b1a80> We&#39;re sorry, but your payment could not be processed. </p><div class="result-details" data-v-690b1a80><p data-v-690b1a80>This could be due to:</p><ul data-v-690b1a80><li data-v-690b1a80>Insufficient funds</li><li data-v-690b1a80>Card declined by issuer</li><li data-v-690b1a80>Payment session expired</li><li data-v-690b1a80>Technical issues</li></ul><p data-v-690b1a80>Please try again or contact our support team for assistance.</p></div>',4)),e("div",dv,[de(d,{to:"/results",class:"btn-secondary"},{default:De(()=>[...f[0]||(f[0]=[Y("Try Again",-1)])]),_:1}),de(d,{to:"/",class:"btn-primary"},{default:De(()=>[...f[1]||(f[1]=[Y("Back to Home",-1)])]),_:1})])])])}const pv=qe(rv,[["render",vv],["__scopeId","data-v-690b1a80"]]),mv={class:"find-reservation-wrap"},fv={class:"find-reservation-container"},gv={class:"form-group"},hv={class:"form-group"},yv={class:"form-actions"},bv={__name:"FindReservation",setup(k){const f=m(""),d=m(""),b=()=>{!f.value||!d.value||alert("Feature coming soon: Find reservation "+f.value)};return(v,h)=>(o(),i("div",mv,[e("div",fv,[h[5]||(h[5]=e("h1",{class:"find-reservation-title"},"Find Your Reservation",-1)),e("form",{class:"find-reservation-form",onSubmit:re(b,["prevent"])},[e("div",gv,[h[2]||(h[2]=e("label",{class:"form-label"},"Confirmation or Booking Number*",-1)),me(e("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=u=>f.value=u),class:"form-input",placeholder:"",required:""},null,512),[[je,f.value]]),h[3]||(h[3]=e("div",{class:"form-help-text"}," *Confirmation number format: 12345678-1-ABC ",-1))]),e("div",hv,[h[4]||(h[4]=e("label",{class:"form-label"},"Email*",-1)),me(e("input",{type:"email","onUpdate:modelValue":h[1]||(h[1]=u=>d.value=u),class:"form-input",placeholder:"",required:""},null,512),[[je,d.value]])]),e("div",yv,[e("button",{type:"submit",class:q(["btn-find-reservation",{active:f.value&&d.value}])}," Find Reservation ",2)])],32),h[6]||(h[6]=e("div",{class:"find-reservation-footer"},[e("p",null,"Don't know your confirmation number?"),e("p",null," This number was included in an email sent at the time of booking. Please check your email to recover the number. ")],-1))])]))}},kv=qe(bv,[["__scopeId","data-v-9d81daa5"]]),wv=Ba({history:za(),routes:[{path:"/",component:il},{path:"/plan",component:kd,meta:{planHeader:!0}},{path:"/results",component:Dc},{path:"/payment-success",component:lv},{path:"/payment-failed",component:pv},{path:"/find-reservation",component:kv}]});Fa(xo).use(wv).mount("#app");
